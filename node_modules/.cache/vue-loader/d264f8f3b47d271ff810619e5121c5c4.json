{"remainingRequest":"C:\\Users\\icald\\VueJS\\store_app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\icald\\VueJS\\store_app\\src\\components\\modalProducto.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"C:\\Users\\icald\\VueJS\\store_app\\src\\components\\modalProducto.vue","mtime":1605733975865},{"path":"C:\\Users\\icald\\VueJS\\store_app\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\icald\\VueJS\\store_app\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\icald\\VueJS\\store_app\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\icald\\VueJS\\store_app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\icald\\VueJS\\store_app\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5jb250YWluZXJ7CiAgbWFyZ2luLXRvcDogMHB4IWltcG9ydGFudDsKfQouY3VzdG9tLWNvbnRyb2wtbGFiZWwsIC5sYmx7CiAgZm9udC1zaXplOiAxNHB4IWltcG9ydGFudDsKfQouaW5wdXQtZ3JvdXAtcHJlcGVuZCwuaW5wdXQtZ3JvdXAtdGV4dHsKICB3aWR0aDogNDFweCFpbXBvcnRhbnQ7Cn0KLmlucHV0LWdyb3VwLXByZXBlbmR7CiAgdGV4dC1hbGlnbjogY2VudGVyOwp9Ci5iLWN1c3RvbS1jb250cm9sLWxnID4gbGFiZWwuY3VzdG9tLWNvbnRyb2wtbGFiZWx7CiAgcGFkZGluZy10b3A6IDRweCFpbXBvcnRhbnQ7Cn0KI21vZGFsUHJvZHVjdG9fX19CVl9tb2RhbF9jb250ZW50X3sKICBib3JkZXItd2lkdGg6IDBweCFpbXBvcnRhbnQ7Cn0KI21vZGFsUHJvZHVjdG9fX19CVl9tb2RhbF90aXRsZV97CiAgcGFkZGluZy10b3A6IDVweCFpbXBvcnRhbnQ7Cn0K"},{"version":3,"sources":["modalProducto.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+fA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"modalProducto.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div>\r\n    <b-modal id=\"modalProducto\"\r\n    :title=\"ElTituloModal\"\r\n    header-bg-variant=\"dark\"\r\n    header-text-variant=\"light\"\r\n    cancel-variant=\"outline-danger\"\r\n    ok-variant=\"outline-primary\"\r\n    ok-title=\"Agregar Categoría\"\r\n    cancel-title=\"Cerrar\"\r\n    @ok=\"onSubmit\"\r\n    centered\r\n    >\r\n        <div class=\"mt-3 pl-2 pr-2\">\r\n            <b-form @reset=\"onReset\" v-if=\"show\">\r\n                <div>\r\n                  <!-- Styled -->\r\n                  <b-form-file\r\n                    class=\"text-left border-bottom-0 mb-3\"\r\n                    id=\"Imagenes_Array\"\r\n                    accept=\"image/*\"\r\n                    multiple\r\n                    :file-name-formatter=\"formatNames\"\r\n                    v-model=\"arrayImagenes\"\r\n                    @blur=\"cambioUnInput\"\r\n                    placeholder=\"Imágenes Producto\"\r\n                    drop-placeholder=\"Drop file here...\"\r\n                    size=\"sm\"\r\n                  ></b-form-file>\r\n                </div>\r\n                \r\n                <b-form-group id=\"input-group-1\">\r\n                  <b-form-input\r\n                    @keydown=\"cambioUnInput\"\r\n                    id=\"input-1\"\r\n                    v-model=\"form.nombre\"\r\n                    type=\"text\"\r\n                    required\r\n                    placeholder=\"Nombre Producto\"\r\n                    name=\"nombre\"\r\n                    size=\"sm\"\r\n                  ></b-form-input>\r\n                </b-form-group>\r\n\r\n                <b-form-group id=\"input-group-2\">   \r\n                  <b-form-input\r\n                    @keydown=\"cambioUnInput\"\r\n                    id=\"input-2\"\r\n                    v-model=\"form.descripcion\"\r\n                    required\r\n                    placeholder=\"Descripción Producto\"\r\n                    type=\"text\"\r\n                    name=\"descripcion\"\r\n                    size=\"sm\"\r\n                  ></b-form-input>\r\n                </b-form-group>\r\n\r\n                <b-form-group>\r\n                  <b-form-select\r\n                    v-model=\"form.categoria\"\r\n                    :options=\"options\"\r\n                    @change=\"cambioUnInput\"\r\n                    size=\"sm\"\r\n                  ></b-form-select>\r\n                </b-form-group>\r\n\r\n\r\n                <b-form-group id=\"input-group-4\">\r\n                  <b-form-input\r\n                    @keydown=\"cambioUnInput\"\r\n                    id=\"input-4\"\r\n                    v-model=\"form.cantidad\"\r\n                    required\r\n                    placeholder=\"Cantidad\"\r\n                    type=\"number\"\r\n                    name=\"cantidad\" \r\n                    size=\"sm\"\r\n                  ></b-form-input>\r\n                </b-form-group>\r\n\r\n                <b-form-group id=\"input-group-3\">\r\n                  <b-form-input\r\n                    @change=\"cambioInputPrecio\"\r\n                    id=\"input-precio\"\r\n                    v-model=\"form.precio\"\r\n                    required\r\n                    placeholder=\"Precio\"\r\n                    type=\"number\"\r\n                    name=\"precio\"\r\n                    size=\"sm\"\r\n                  ></b-form-input>\r\n                </b-form-group>\r\n\r\n\r\n\r\n                \r\n                <b-card class=\"mb-3 pb-2 pl-2\">\r\n                   <b-form-group class=\"mb-2\">\r\n                    <b-form-checkbox :disabled=\"descuentoHabilitado\" v-model=\"form.aplicaDescuento\" @change=\"cambioAplicaDescuento\" name=\"check-button\" switch size=\"lg\" class=\" mt-1\">\r\n                      Aplica Descuento\r\n                    </b-form-checkbox>\r\n                   </b-form-group>                  \r\n                  <div :hidden=\"!form.aplicaDescuento\" class=\"pr-2\">\r\n                    <b-card class=\"pl-2 pr-2 mb-2\">\r\n                      <div class=\"w-50 pr-1\" style=\"display:inline-block;\">\r\n                        <b-form-group id=\"input-group-5\" class=\"mb-0\">\r\n                          <label class=\"mb-0 lbl\"><i><b>Desde</b></i></label>\r\n                          <b-form-input\r\n                            class=\"p-1\"\r\n                            id=\"input-desde inline-form\"\r\n                            v-model=\"form.descuento.desde\"\r\n                            type=\"date\"\r\n                            style=\"display:inline-block!important;\"\r\n                            name=\"desde\"\r\n                            size=\"sm\"\r\n                          ></b-form-input>\r\n                        </b-form-group>\r\n                      </div>\r\n\r\n                      <div class=\"w-50 pl-1\" style=\"display:inline-block;\">\r\n                        <b-form-group id=\"input-group-6\" class=\"mb-0\">\r\n                          <label class=\"mb-0 lbl\"><i><b>Hasta</b></i></label>\r\n                          <b-form-input\r\n                            class=\"p-1\"\r\n                            id=\"input-hasta\"\r\n                            v-model=\"form.descuento.hasta\"\r\n                            type=\"date\"\r\n                            style=\"display:inline-block!important;\"\r\n                            name=\"hasta\" \r\n                            size=\"sm\"\r\n                            :min=\"form.descuento.desde\"\r\n                          ></b-form-input>\r\n                        </b-form-group>\r\n                      </div>\r\n                    </b-card>\r\n\r\n                      <b-card class=\"pl-2 pr-2\">\r\n                          <div class=\"w-50\" id=\"parte1\" style=\"display:inline-block;\">\r\n                            <b-form-group class=\"mb-0\">\r\n                              <b-form-checkbox\r\n                              v-model=\"form.descuento.tipoPorcentaje\"\r\n                              @change=\"cambioTipoDescuento\"\r\n                              name=\"check-button\"\r\n                              switch\r\n                              size=\"lg\"\r\n                              style=\"display:inline-block; width:130px;\"\r\n                              >\r\n                                Porcentaje\r\n                              </b-form-checkbox>\r\n                              \r\n\r\n                              <b-form-checkbox\r\n                              v-model=\"form.descuento.tipoMonto\"\r\n                              @change=\"cambioTipoDescuento\"\r\n                              name=\"check-button\"\r\n                              switch\r\n                              size=\"lg\"\r\n                              style=\"display:inline-block;\">\r\n                                Monto\r\n                              </b-form-checkbox>\r\n                            </b-form-group>\r\n                          </div>\r\n                          <div class=\"w-50\" id=\"parte2\" style=\"display:inline-block;\">\r\n                                <b-form-group :hidden=\"form.descuento.tipoMonto\" class=\"mb-0\">\r\n                                  <b-input-group size=\"sm\" prepend=\"%\" class=\"mb-2\">\r\n                                    <b-form-input\r\n                                      @keyup=\"cambioDescuentoPorc\"\r\n                                      type=\"number\"\r\n                                      :min=\"0\"\r\n                                      :max=\"100\"\r\n                                      id=\"inline-form-input-porcentaje\"\r\n                                      placeholder=\"Porcentaje\"\r\n                                      v-model=\"form.descuento.porcentajeDescuento\"\r\n                                    ></b-form-input>\r\n                                  </b-input-group>\r\n                                </b-form-group>\r\n                                <b-form-group :hidden=\"form.descuento.tipoPorcentaje\" class=\"mb-0\">\r\n                                  <b-input-group size=\"sm\" prepend=\"CLP\" class=\"mb-2\">\r\n                                    <b-form-input\r\n                                      @keyup=\"cambioDescuentoMonto\"\r\n                                      type=\"number\"\r\n                                      :min=\"0\"\r\n                                      :max=\"form.precio\"\r\n                                      id=\"inline-form-input-monto\"\r\n                                      placeholder=\"Monto\"\r\n                                      v-model=\"form.descuento.montoDescuento\"\r\n                                    ></b-form-input>\r\n                                  </b-input-group>\r\n                                </b-form-group>\r\n                            \r\n                          </div>\r\n                      </b-card>\r\n                  </div>\r\n                </b-card>\r\n                <!-- <select id=\"\" class=\"form-control mt-0 border-top-0 rounded-top-0\">\r\n                    <option v-for=\"item in form.nombreImags\" :key=\"item.id\">\r\n                    {{ item.name }}\r\n                    </option>\r\n                </select> -->\r\n            </b-form>\r\n\r\n            <Modal ref=\"elModal\" :tituloModal=\"form.nombre\" :textoModal=\"form.descripcion\"></Modal>\r\n            \r\n        </div>\r\n\r\n        <template v-slot:modal-footer>\r\n            <div class=\"text-center mt-3\">\r\n                <!-- <b-button to=\"/productosTodos\" variant=\"success\" style=\"display: inline-block!important;\" size=\"sm\" class=\"mr-2\">Volver</b-button> -->\r\n                <b-button :disabled=\"activoBtnRegistrar\" type=\"button\" @click=\"vistaPreviaModal\" class=\"mr-2\" variant=\"outline-success\" size=\"sm\">Vista Previa</b-button>\r\n                <b-button @click=\"onReset\" class=\"mr-1\" variant=\"outline-danger\" size=\"sm\">Limpiar</b-button>\r\n                <!-- <b-button type=\"reset\" class=\"mr-1\" variant=\"outline-danger\" size=\"sm\">Limpiar</b-button> -->\r\n                <b-button :disabled=\"activoBtnRegistrar\" type=\"button\" @click=\"onSubmit\" class=\"ml-1\" variant=\"outline-primary\" size=\"sm\">Guardar</b-button>\r\n            </div>\r\n        </template>\r\n    </b-modal>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport formData from 'form-data'\r\nimport Modal from './Modal'\r\nimport InputFotos from './InputFotos'\r\nimport axios from 'axios'\r\nimport { mapMutations, mapState } from 'vuex';\r\n// let url = 'http://localhost:3000/';\r\nlet url = 'https://storeapp-back-end.herokuapp.com/';\r\nvar arregloImagenes = [];\r\nexport default {\r\n    name:'NuevoProducto',\r\n    components:{\r\n        InputFotos, Modal\r\n    },\r\n    data() {  \r\n      return {\r\n        form: {\r\n          nombre: '',\r\n          descripcion: '',\r\n          categoria: '',\r\n          precio: '',\r\n          cantidad: '',\r\n          nombreImags: '',\r\n          aplicaDescuento: false,\r\n          idProducto:'',\r\n          descuento:{\r\n            desde: '',\r\n            hasta:'',\r\n            tipoPorcentaje:true,\r\n            tipoMonto:false,\r\n            montoDescuento:'',\r\n            porcentajeDescuento:''\r\n          }\r\n        },\r\n        arrayImagenes:[],\r\n        show: true,\r\n        activoVer:true,\r\n        activoBtnRegistrar: false,\r\n        descuentoHabilitado:true,\r\n        options: [],\r\n        RegistroEdicion:''\r\n      }\r\n    },\r\n    computed:{\r\n        ...mapState(['productosTodos_'])\r\n    },\r\n    props:{\r\n        propsImg:{\r\n            id:Number,\r\n            src:String,\r\n            thumbnail:String\r\n        },\r\n        arregloFinal: Array,\r\n        producto: undefined,\r\n        idProducto :'',\r\n        ElTituloModal: String\r\n    }, \r\n    methods: {\r\n      ...mapMutations(['updateProductosTodos']),\r\n      onSubmit(evt) {        \r\n\r\n\r\n          var datos = this.form;\r\n          axios.post(`${url}NuevoProducto`, datos, { headers: {'content-type':'application/json'} }).then(function (resp) {\r\n            // console.log(this.form);\r\n          alert(resp.data);  \r\n              // this.onReset();\r\n              // this.$bvModal.hide('modalProducto');\r\n\r\n          var formulario = new formData();\r\n          var vaina = document.querySelector('#Imagenes_Array').files;\r\n          for (let t = 0; t < vaina.length; t++) {\r\n            // console.log(vaina[t].name)\r\n            formulario.append('imagen', vaina[t])\r\n          }\r\n\r\n          axios.post(`${url}ImagenesNuevoProducto`, formulario, { headers: {'content-type':'multipart/form-data'} }).then(function (resp) {\r\n            this.$bvModal.hide('modalProducto');\r\n          }.bind(this));\r\n          axios.post(`${url}traerTodos`).then(function(res){\r\n              // this.productosTodos_ = res.data;\r\n              // console.log(res.data);\r\n              this.updateProductosTodos(res.data);\r\n              // console.log(this.productosTodos_);\r\n          }.bind(this));\r\n        }.bind(this));\r\n      },\r\n      onReset(evt) {\r\n        this.form.nombre = ''\r\n        this.form.descripcion = ''\r\n        this.form.categoria = null\r\n        this.form.precio = null\r\n        this.form.cantidad = null\r\n        this.form.nombreImags = null\r\n        // this.form.dataImags = undefined\r\n        this.activoBtnRegistrar = true\r\n        this.arrayImagenes = []\r\n        this.show = false\r\n        this.$nextTick(() => {\r\n            this.show = true\r\n        })\r\n      },\r\n      cambiar(){\r\n        let that = this;\r\n        this.$watch(() => {\r\n          if(that.arrayImagenes != that.$refs.inputFoto.file){\r\n            // this.form.dataImags = this.$refs.inputFoto.file\r\n            that.arrayImagenes = that.$refs.inputFoto.file\r\n\r\n            that.form.dataImags = that.$refs.inputFoto.file;\r\n\r\n            // console.log(this.arrayImagenes);\r\n\r\n            const toBase64 = file => new Promise((resolve, reject) => {\r\n              const reader = new FileReader();\r\n              reader.readAsDataURL(file);\r\n              reader.onload = () => resolve(reader.result);\r\n              reader.onerror = error => reject(error);\r\n            });\r\n            // console.log(that.arrayImagenes.length);\r\n             let eso = this;\r\n            async function convert_Base64(){\r\n              for(var t = 0; t < that.arrayImagenes.length; t++){\r\n                that.form.dataImags[t] = (await toBase64(that.$refs.inputFoto.file[t]));\r\n                arregloImagenes.push({ id:that.form.nombreImags[t], src:that.form.dataImags[t], thumbnail:that.form.dataImags[t] })\r\n              }\r\n            }\r\n            convert_Base64();\r\n          }\r\n        });\r\n      },\r\n      vistaPreviaModal(){\r\n        console.log(this.$refs.elModal.arrayImagenes);\r\n        if((this.form.dataImags != undefined) && (this.form.dataImags != null)){\r\n          this.$refs.elModal.arrayImagenes = this.form.dataImags;\r\n          this.$bvModal.show(\"modal_1\");\r\n          console.log(this.$refs.elModal.arrayImagenes);\r\n        }\r\n      },\r\n      formatNames(files) {\r\n          // console.log(files);\r\n        if (files.length === 1) {\r\n          return files[0].name\r\n        } else {\r\n          return `${files.length} Imágenes Seleccionadas`;\r\n          alert(`${files.length} Imágenes Seleccionadas`);\r\n        }\r\n      },\r\n      habilitarBoton(){\r\n        var archivos = document.querySelector(\"#Imagenes_Array\").files;\r\n        if(archivos.length > 0){\r\n          this.activoVer = false;\r\n        }\r\n        else{\r\n          this.activoVer = true;\r\n        }\r\n      },\r\n      cambioUnInput(){\r\n        if(this.form.nombre != '' && this.form.descripcion != '' && this.form.precio != '' && this.form.categoria != null && this.form.cantidad != '' ){\r\n            this.activoBtnRegistrar = false;\r\n        }\r\n        else{\r\n            this.activoBtnRegistrar = true;\r\n        }\r\n\r\n        //#region HABILITAR EL BOTON DE DESCUENTO EN CASO DE HABER INGRESADO UN PRECIO, SE NO HABERLO\r\n        if(this.form.precio != ''){\r\n          this.descuentoHabilitado = false; //DISABLED=\"FALSE\" --> BTN HABILITADO\r\n          this.form.aplicaDescuento = false;\r\n        }\r\n        else{\r\n          this.descuentoHabilitado = true; //DISABLED=\"TRUE\" --> BTN DESHABILITADO\r\n        }\r\n        //#endregion\r\n\r\n        //#region VER SI HAY DESCUENTO ACTIVADO, Y EN CASO DE ESTAR ACTIVADO VER SI TODOS SUS CAMPOS SE LLENARON\r\n        if(this.descuentoHabilitado === false){\r\n          if(this.form.descuento.desde != '' && this.form.descuento.hasta != '' && this.form.descuento.montoDescuento != ''){\r\n            this.activoBtnRegistrar = false; //DISABLED=\"FALSE\" --> BTN HABILITADO\r\n          }\r\n          else{\r\n            this.activoBtnRegistrar = true; //DISABLED=\"TRUE\" --> BTN DESHABILITADO\r\n          }\r\n        }\r\n        //#endregion\r\n      },\r\n      cambioInputPrecio(){\r\n        if(this.form.nombre != '' && this.form.descripcion != '' && this.form.precio != '' && this.form.categoria != null && this.form.cantidad != '' ){\r\n            this.activoBtnRegistrar = false;\r\n        }\r\n        else{\r\n            this.activoBtnRegistrar = true;\r\n        }\r\n\r\n        //#region HABILITAR EL BOTON DE DESCUENTO EN CASO DE HABER INGRESADO UN PRECIO, SE NO HABERLO\r\n        if(this.form.precio != ''){\r\n          this.descuentoHabilitado = false; //DISABLED=\"FALSE\" --> BTN HABILITADO\r\n          this.form.aplicaDescuento = false;\r\n        }\r\n        else{\r\n          this.descuentoHabilitado = true; //DISABLED=\"TRUE\" --> BTN DESHABILITADO\r\n          // this.form.aplicaDescuento = false;\r\n          this.cambioAplicaDescuento()\r\n        }\r\n        //#endregion\r\n\r\n        //#region VER SI HAY DESCUENTO ACTIVADO, Y EN CASO DE ESTAR ACTIVADO VER SI TODOS SUS CAMPOS SE LLENARON\r\n        if(this.descuentoHabilitado === false){\r\n          if(this.form.descuento.desde != '' && this.form.descuento.hasta != '' && this.form.descuento.montoDescuento != ''){\r\n            this.activoBtnRegistrar = false; //DISABLED=\"FALSE\" --> BTN HABILITADO\r\n          }\r\n          else{\r\n            this.activoBtnRegistrar = true; //DISABLED=\"TRUE\" --> BTN DESHABILITADO\r\n          }\r\n        }\r\n        //#endregion\r\n      },\r\n      cambioTipoDescuento(){\r\n        this.form.descuento.tipoPorcentaje = !this.form.descuento.tipoPorcentaje;\r\n        this.form.descuento.tipoMonto = !this.form.descuento.tipoMonto;\r\n        this.form.descuento.montoDescuento = '';\r\n        this.form.descuento.porcentajeDescuento = '';\r\n      },\r\n      cambioDescuentoPorc(e){\r\n        if(parseFloat(this.form.descuento.porcentajeDescuento) > parseFloat(e.target.max)){\r\n          alert(`El porcentaje de descuento no puede exceder el ${e.target.max}%`);\r\n          this.form.descuento.porcentajeDescuento = '';\r\n        }\r\n        else{\r\n          this.form.descuento.montoDescuento = (this.form.precio * (this.form.descuento.porcentajeDescuento / 100)).toFixed(1)\r\n          console.log(this.form)\r\n        }\r\n      },\r\n      cambioDescuentoMonto(e){\r\n        if(parseFloat(this.form.descuento.montoDescuento) > parseFloat(e.target.max)){\r\n          alert(`El monto de descuento no puede exceder los ${e.target.max} CLP`);\r\n          this.form.descuento.montoDescuento = '';\r\n        }\r\n        else{\r\n          this.form.descuento.porcentajeDescuento = ((this.form.precio - (this.form.precio - this.form.descuento.montoDescuento)) / this.form.precio) * 100\r\n          console.log(this.form)\r\n        }\r\n      },\r\n      cambioAplicaDescuento(){\r\n        this.form.aplicaDescuento = !this.form.aplicaDescuento;\r\n        if(this.form.aplicaDescuento === false){\r\n          this.form.descuento.desde = ''\r\n          this.form.descuento.hasta = ''\r\n          this.form.descuento.tipoPorcentaje = true\r\n          this.form.descuento.tipoMonto = false\r\n          this.form.descuento.montoDescuento = ''\r\n          this.form.descuento.porcentajeDescuento = ''\r\n        }\r\n      }\r\n    },\r\n    watch:{\r\n      arrayImagenes: function (nuevoArray, viejoArray) {\r\n        var arregloNombres = [];\r\n        var archivos = document.querySelector('#Imagenes_Array').files;\r\n\r\n        for(var t = 0; t < archivos.length; t++){\r\n          arregloNombres.push(archivos[t].name.replace(/ /g,'_'));\r\n        }\r\n\r\n        this.form.nombreImags = arregloNombres;\r\n      },\r\n        producto(nuevo){\r\n            this.form.nombre = nuevo.nombre;\r\n            this.form.descripcion = nuevo.descripcion;\r\n            this.form.categoria = nuevo.categoria;\r\n            this.form.precio = nuevo.precio;\r\n            this.form.cantidad = nuevo.cantidad;\r\n            this.form.nombreImags = nuevo.nombreImags;\r\n            this.form.dataImags = nuevo.dataImagenes;\r\n            this.form.idProducto = nuevo._id;\r\n            this.arrayImagenes = nuevo.dataImagenes;\r\n            this.activoBtnRegistrar = false;\r\n            this.formatNames(nuevo.dataImagenes);\r\n        }\r\n    },\r\n    mounted(){\r\n      this.options.push({ 'value':null, 'text':'Categoría'});\r\n      axios.get(`${url}traerCategorias`).then(function(resp){\r\n        // console.log(resp.data);\r\n        resp.data.map(function(obj){\r\n          this.options.push({ 'value':obj._id, 'text':obj.nombre })\r\n        }.bind(this));\r\n      }.bind(this));\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n  .container{\r\n    margin-top: 0px!important;\r\n  }\r\n  .custom-control-label, .lbl{\r\n    font-size: 14px!important;\r\n  }\r\n  .input-group-prepend,.input-group-text{\r\n    width: 41px!important;\r\n  }\r\n  .input-group-prepend{\r\n    text-align: center;\r\n  }\r\n  .b-custom-control-lg > label.custom-control-label{\r\n    padding-top: 4px!important;\r\n  }\r\n  #modalProducto___BV_modal_content_{\r\n    border-width: 0px!important;\r\n  }\r\n  #modalProducto___BV_modal_title_{\r\n    padding-top: 5px!important;\r\n  }\r\n</style>"]}]}