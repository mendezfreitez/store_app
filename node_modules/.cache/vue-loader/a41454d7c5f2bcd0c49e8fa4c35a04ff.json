{"remainingRequest":"C:\\Users\\icald\\VueJS\\store_app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\icald\\VueJS\\store_app\\src\\components\\productosTodos.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\icald\\VueJS\\store_app\\src\\components\\productosTodos.vue","mtime":1605839554052},{"path":"C:\\Users\\icald\\VueJS\\store_app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\icald\\VueJS\\store_app\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\icald\\VueJS\\store_app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\icald\\VueJS\\store_app\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnDQppbXBvcnQgTW9kYWwgZnJvbSAnLi4vY29tcG9uZW50cy9DYXRlZ29yaWFzL01vZGFsTnVldmFDYXRlZ29yaWEnDQppbXBvcnQgTW9kYWxQcm9kdWN0byBmcm9tICcuLi9jb21wb25lbnRzL21vZGFsUHJvZHVjdG8nDQppbXBvcnQgeyBtYXBNdXRhdGlvbnMsIG1hcFN0YXRlIH0gZnJvbSAndnVleCc7DQovLyBsZXQgdXJsID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC8nOw0KbGV0IHVybCA9ICdodHRwczovL3N0b3JlYXBwLWJhY2stZW5kLmhlcm9rdWFwcC5jb20vJzsNCmV4cG9ydCBkZWZhdWx0IHsNCiAgICBuYW1lOidwcm9kdWN0b3NUb2RvcycsDQogICAgY29tcG9uZW50czp7DQogICAgICAgIE1vZGFsLA0KICAgICAgICBNb2RhbFByb2R1Y3RvDQogICAgfSwNCiAgICBkYXRhKCl7DQogICAgICAgIHJldHVybnsNCiAgICAgICAgICAgIHByb2R1Y3Rvc1RvZG9zOltdLA0KICAgICAgICAgICAgY2F0ZWdvcmlhc1RvZGFzOltdLA0KICAgICAgICAgICAgdW5Tb2xvUHJvZHVjdG86dW5kZWZpbmVkLA0KICAgICAgICAgICAgaWRQcm9kdWN0bzpTdHJpbmcsDQogICAgICAgICAgICBUb3RhbDpOdW1iZXIsDQogICAgICAgICAgICB0aXR1bG86JycsDQogICAgICAgICAgICB0aXR1bG9Qcm9kdWN0b01vZGFsOicnLA0KICAgICAgICAgICAgdGV4dG86JycNCiAgICAgICAgfQ0KICAgIH0sDQogICAgY29tcHV0ZWQ6ew0KICAgICAgICAuLi5tYXBTdGF0ZShbJ2NhdGVnb3JpYXMnLCdwcm9kdWN0b3NUb2Rvc18nXSkNCiAgICB9LA0KICAgIG1vdW50ZWQoKXsNCiAgICAgICAgdGhpcy50cmFlclByb2R1Y3Rvc1RvZG9zKCcnKQ0KICAgICAgICB0aGlzLnRyYWVyQ2F0ZWdvcmlhcygpDQogICAgfSwNCiAgICBtZXRob2RzOnsNCiAgICAgICAgLi4ubWFwTXV0YXRpb25zKFsndHJhZXJDYXRlZ29yaWFzJywndHJhZXJQcm9kdWN0b3NUb2RvcyddKSwNCiAgICAgICAgbW9kYWxQcm9kdWN0byhwcm9kdWN0byl7DQogICAgICAgICAgICB0aGlzLnRpdHVsb1Byb2R1Y3RvTW9kYWwgPSAnTnVldm8gUHJvZHVjdG8nDQogICAgICAgICAgICB0aGlzLiRidk1vZGFsLnNob3coJ21vZGFsUHJvZHVjdG8nKTsNCiAgICAgICAgfSwNCiAgICAgICAgZWxpbWluYXJQcm9kdWN0byhpZCwgdGl0dWxvKXsNCiAgICAgICAgICAgIHZhciBlbGltUHJvZCA9IGNvbmZpcm0oYMK/RXN0YSBzZWd1cm8gZGUgZWxpbWluYXIgZWwgcHJvZHVjdG8gJyR7dGl0dWxvfSc/YCk7DQogICAgICAgICAgICB2YXIgZGF0b3MgPSB7DQogICAgICAgICAgICAgICAgX2lkOmlkDQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZihlbGltUHJvZCl7DQogICAgICAgICAgICAgICAgYXhpb3MucG9zdChgJHt1cmx9ZWxpbWluYXJQcm9kdWN0b2AsIGRhdG9zKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCl7DQogICAgICAgICAgICAgICAgICAgIGFsZXJ0KHJlc3VsdC5kYXRhKTsNCiAgICAgICAgICAgICAgICAgICAgYXhpb3MuZ2V0KGAke3VybH10cmFlclRvZG9zYCkudGhlbihmdW5jdGlvbihyZXMpew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9kdWN0b3NUb2RvcyA9IHJlcy5kYXRhOw0KICAgICAgICAgICAgICAgICAgICB9LmJpbmQodGhpcykpOw0KICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgICAgIGVkaXRhclByb2R1Y3RvKGlkLCBwcm9kdWN0byl7DQogICAgICAgICAgICBjb25zb2xlLmxvZyhwcm9kdWN0bykNCiAgICAgICAgICAgIHRoaXMudGl0dWxvUHJvZHVjdG9Nb2RhbCA9ICdFZGl0YXIgUHJvZHVjdG8nDQogICAgICAgICAgICB0aGlzLnVuU29sb1Byb2R1Y3RvID0gcHJvZHVjdG8NCiAgICAgICAgICAgIHRoaXMuaWRQcm9kdWN0byA9IGlkDQogICAgICAgICAgICB0aGlzLiRidk1vZGFsLnNob3coJ21vZGFsUHJvZHVjdG8nKQ0KICAgICAgICB9LA0KICAgICAgICBtb2RhbENhdGVnb3JpYShpZCwgbm9tYnJlKXsNCiAgICAgICAgICAgIC8vIGFsZXJ0KGAnJHtub21icmV9J2ApDQogICAgICAgICAgICBpZihpZCAhPSAnJyl7DQogICAgICAgICAgICAgICAgdGhpcy50aXR1bG8gPSBgRWRpdGFyIENhdGVnb3LDrWFgOw0KICAgICAgICAgICAgICAgIHRoaXMuJHJlZnMubW9kYWxDYXRlZ29yaWEuZm9ybS5ub21icmUgPSBub21icmU7DQogICAgICAgICAgICAgICAgdGhpcy4kcmVmcy5tb2RhbENhdGVnb3JpYS5mb3JtLmlkQ2F0ZWdvcmlhID0gaWQ7DQogICAgICAgICAgICAgICAgdGhpcy4kcmVmcy5tb2RhbENhdGVnb3JpYS5kZXNhY3RpdmFkbyA9IGZhbHNlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2V7DQogICAgICAgICAgICAgICAgdGhpcy50aXR1bG8gPSBgTnVldmEgQ2F0ZWdvcsOtYWA7DQogICAgICAgICAgICAgICAgdGhpcy4kcmVmcy5tb2RhbENhdGVnb3JpYS5mb3JtLm5vbWJyZSA9ICcnOw0KICAgICAgICAgICAgICAgIHRoaXMuJHJlZnMubW9kYWxDYXRlZ29yaWEuZGVzYWN0aXZhZG8gPSB0cnVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgDQogICAgICAgICAgICB0aGlzLiRidk1vZGFsLnNob3coIm1vZGFsTnVldmFDYXRlZ29yaWEiKTsNCiAgICAgICAgfSwNCiAgICAgICAgZWxpbWluYXJDYXRlZ29yaWEoaWQsIG5vbWJyZSl7DQogICAgICAgICAgICB2YXIgY29uZmlybWFyID0gY29uZmlybShgwr9Fc3TDoSBzZWd1cm8gZGUgZWxpbWluYXIgbGEgY2F0ZWdvcsOtYSAke25vbWJyZX0gZGUgc2lzdGVtYT9gKTsNCiAgICAgICAgICAgIGlmKGNvbmZpcm1hcil7DQogICAgICAgICAgICAgICAgbGV0IGVzdG8gPSB0aGlzOw0KICAgICAgICAgICAgICAgIGF4aW9zLnBvc3QoYCR7dXJsfWVsaW1pbmFyQ2F0ZWdvcmlhYCwgeyBpZDppZCB9KS50aGVuKGZ1bmN0aW9uKHJlc3Apew0KICAgICAgICAgICAgICAgICAgICBhbGVydChyZXNwLmRhdGEpOw0KICAgICAgICAgICAgICAgICAgICBheGlvcy5nZXQoYCR7dXJsfXRyYWVyQ2F0ZWdvcmlhc2ApLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGVzdG8uY2F0ZWdvcmlhc1RvZGFzID0gcmVzcC5kYXRhOw0KICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocmVzcC5kYXRhKTsNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIC8vIGVzdG8uY2F0ZWdvcmlhc1RvZGFzID0gZXN0by5jYXRlZ29yaWFzOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfSwNCiAgICB3YXRjaDp7DQogICAgICAgIGNhdGVnb3JpYXMobnVldm8pew0KICAgICAgICAgICAgdGhpcy5jYXRlZ29yaWFzVG9kYXMgPSBudWV2bzsNCiAgICAgICAgICAgIC8vIGFsZXJ0KHRoaXMuY2F0ZWdvcmlhc1RvZGFzLmxlbmd0aCk7DQogICAgICAgIGNvbnNvbGUubG9nKG51ZXZvKTsNCiAgICAgICAgDQogICAgICAgIH0sDQogICAgICAgIHByb2R1Y3Rvc1RvZG9zXyhudWV2byl7DQogICAgICAgICAgICB0aGlzLnByb2R1Y3Rvc1RvZG9zID0gbnVldm87DQogICAgICAgIH0NCiAgICB9DQp9DQo="},{"version":3,"sources":["productosTodos.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"productosTodos.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n<div>\r\n    <b-container>\r\n        <b-badge class=\"mb-2\" variant=\"dark\">\r\n        <h3 class=\"mb-0\" style=\"display: inline-block!important;\">Productos</h3></b-badge>\r\n        <!-- <b-button size=\"sm\" to=\"/NuevoProducto\" variant=\"outline-success\" style=\"display: inline-block!important;float:right!important;\">\r\n            Nuevo\r\n            <b-icon icon=\"plus\"></b-icon>\r\n        </b-button> -->\r\n        <b-button size=\"sm\" variant=\"outline-dark\" style=\"display: inline-block!important;float:right!important;\" @click=\"modalProducto('')\">\r\n            Nuevo\r\n            <b-icon icon=\"plus\"></b-icon>\r\n        </b-button>\r\n        <div class=\"table-responsive\">\r\n            <table class=\"table table-sm table-bordered table-hover\">\r\n                <thead>\r\n                    <tr>\r\n                        <th scope=\"col\">Producto</th>\r\n                        <!-- <th scope=\"col\">Descripción</th> -->\r\n                        <!-- <th scope=\"col\">Categoría</th> -->\r\n                        <th scope=\"col\">Precio</th>\r\n                        <th scope=\"col\">Acción</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr v-for=\"Producto in productosTodos\" :key=\"Producto.idProducto\">\r\n                        <td nowrap class=\"text-left\">{{Producto.nombre}}</td>\r\n                        <!-- <td nowrap class=\"text-left\">{{Producto.descripcion.substr(0,50)}}</td> -->\r\n                        <!-- <td nowrap class=\"text-left\">{{Producto.categoria}}</td> -->\r\n                        <td nowrap class=\"text-right\">{{Producto.precio | currency}}</td>\r\n                        <td nowrap class=\"text-center\">\r\n                            <a href=\"#\" class=\"papelera\" @click=\"eliminarProducto(Producto._id, Producto.nombre)\">\r\n                                <b-icon icon=\"trash\" variant=\"primary\" style=\"color: #7952b3;\"></b-icon>\r\n                            </a>\r\n                            <a href=\"#\" class=\"papelera ml-3\" @click=\"editarProducto(Producto._id, Producto)\">\r\n                                <b-icon icon=\"pencil\" variant=\"primary\" style=\"color: #7952b3;\"></b-icon>\r\n                            </a>\r\n                        </td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    </b-container>\r\n\r\n    <Modal ref=\"modalCategoria\" :tituloModal=\"titulo\" :textoModal=\"texto\"></Modal>\r\n    <ModalProducto ref=\"modalProducto\" :ElTituloModal=\"tituloProductoModal\" :producto=\"unSoloProducto\" :idProducto=\"idProducto\"></ModalProducto>\r\n\r\n    <b-container>\r\n        <b-badge class=\"mb-2\" variant=\"dark\">\r\n        <h3 class=\"mb-0\" style=\"display: inline-block!important;\">Categorías</h3></b-badge>\r\n        <b-button size=\"sm\" @click=\"modalCategoria('','')\" variant=\"outline-dark\" style=\"display: inline-block!important;float:right!important;\">\r\n            Nuevo\r\n            <b-icon icon=\"plus\"></b-icon>\r\n        </b-button>\r\n                <div class=\"table-responsive\">\r\n            <table class=\"table table-sm table-bordered table-hover\">\r\n                <thead>\r\n                    <tr>\r\n                        <th scope=\"col\">ID</th>\r\n                        <th scope=\"col\">Nombre Categoría</th>\r\n                        <th scope=\"col\">Acción</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr v-for=\"categoria in categoriasTodas\" :key=\"categoria._id\">\r\n                        <td nowrap class=\"text-left\">{{ categoria._id }}</td>\r\n                        <td nowrap class=\"text-left\">{{ categoria.nombre }}</td>\r\n                        <td nowrap class=\"text-center\">\r\n                            <a href=\"#\" class=\"papelera\" @click=\"eliminarCategoria(categoria._id, categoria.nombre)\">\r\n                                <b-icon icon=\"trash\" variant=\"primary\" style=\"color: #7952b3;\"></b-icon>\r\n                            </a>\r\n                            <a href=\"#\" class=\"papelera ml-3\" @click=\"modalCategoria(categoria._id, categoria.nombre)\">\r\n                                <b-icon icon=\"pencil\" variant=\"primary\" style=\"color: #7952b3;\"></b-icon>\r\n                            </a>\r\n                        </td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    </b-container>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nimport Modal from '../components/Categorias/ModalNuevaCategoria'\r\nimport ModalProducto from '../components/modalProducto'\r\nimport { mapMutations, mapState } from 'vuex';\r\n// let url = 'http://localhost:3000/';\r\nlet url = 'https://storeapp-back-end.herokuapp.com/';\r\nexport default {\r\n    name:'productosTodos',\r\n    components:{\r\n        Modal,\r\n        ModalProducto\r\n    },\r\n    data(){\r\n        return{\r\n            productosTodos:[],\r\n            categoriasTodas:[],\r\n            unSoloProducto:undefined,\r\n            idProducto:String,\r\n            Total:Number,\r\n            titulo:'',\r\n            tituloProductoModal:'',\r\n            texto:''\r\n        }\r\n    },\r\n    computed:{\r\n        ...mapState(['categorias','productosTodos_'])\r\n    },\r\n    mounted(){\r\n        this.traerProductosTodos('')\r\n        this.traerCategorias()\r\n    },\r\n    methods:{\r\n        ...mapMutations(['traerCategorias','traerProductosTodos']),\r\n        modalProducto(producto){\r\n            this.tituloProductoModal = 'Nuevo Producto'\r\n            this.$bvModal.show('modalProducto');\r\n        },\r\n        eliminarProducto(id, titulo){\r\n            var elimProd = confirm(`¿Esta seguro de eliminar el producto '${titulo}'?`);\r\n            var datos = {\r\n                _id:id\r\n            }\r\n            if(elimProd){\r\n                axios.post(`${url}eliminarProducto`, datos).then(function(result){\r\n                    alert(result.data);\r\n                    axios.get(`${url}traerTodos`).then(function(res){\r\n                        this.productosTodos = res.data;\r\n                    }.bind(this));\r\n                }.bind(this));\r\n            }\r\n        },\r\n        editarProducto(id, producto){\r\n            console.log(producto)\r\n            this.tituloProductoModal = 'Editar Producto'\r\n            this.unSoloProducto = producto\r\n            this.idProducto = id\r\n            this.$bvModal.show('modalProducto')\r\n        },\r\n        modalCategoria(id, nombre){\r\n            // alert(`'${nombre}'`)\r\n            if(id != ''){\r\n                this.titulo = `Editar Categoría`;\r\n                this.$refs.modalCategoria.form.nombre = nombre;\r\n                this.$refs.modalCategoria.form.idCategoria = id;\r\n                this.$refs.modalCategoria.desactivado = false;                            \r\n            }\r\n            else{\r\n                this.titulo = `Nueva Categoría`;\r\n                this.$refs.modalCategoria.form.nombre = '';\r\n                this.$refs.modalCategoria.desactivado = true;\r\n            }\r\n            \r\n            this.$bvModal.show(\"modalNuevaCategoria\");\r\n        },\r\n        eliminarCategoria(id, nombre){\r\n            var confirmar = confirm(`¿Está seguro de eliminar la categoría ${nombre} de sistema?`);\r\n            if(confirmar){\r\n                let esto = this;\r\n                axios.post(`${url}eliminarCategoria`, { id:id }).then(function(resp){\r\n                    alert(resp.data);\r\n                    axios.get(`${url}traerCategorias`).then(function (resp) {\r\n                        esto.categoriasTodas = resp.data;\r\n                        // console.log(resp.data);\r\n                    });\r\n                    // esto.categoriasTodas = esto.categorias;\r\n                });\r\n            }\r\n        }\r\n    },\r\n    watch:{\r\n        categorias(nuevo){\r\n            this.categoriasTodas = nuevo;\r\n            // alert(this.categoriasTodas.length);\r\n        console.log(nuevo);\r\n        \r\n        },\r\n        productosTodos_(nuevo){\r\n            this.productosTodos = nuevo;\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>"]}]}