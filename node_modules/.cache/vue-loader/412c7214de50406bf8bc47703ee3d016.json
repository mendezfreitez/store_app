{"remainingRequest":"C:\\Users\\icald\\VueJS\\store_app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\icald\\VueJS\\store_app\\src\\components\\modalProducto.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\icald\\VueJS\\store_app\\src\\components\\modalProducto.vue","mtime":1613930764894},{"path":"C:\\Users\\icald\\VueJS\\store_app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\icald\\VueJS\\store_app\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\icald\\VueJS\\store_app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\icald\\VueJS\\store_app\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgZmlyZWJhc2UgZnJvbSAnZmlyZWJhc2UnOw0KaW1wb3J0IE1vZGFsIGZyb20gJy4vTW9kYWwnDQppbXBvcnQgSW5wdXRGb3RvcyBmcm9tICcuL0lucHV0Rm90b3MnDQppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnDQppbXBvcnQgeyBtYXBNdXRhdGlvbnMsIG1hcFN0YXRlIH0gZnJvbSAndnVleCc7DQoNCnZhciBmaXJlYmFzZUNvbmZpZyA9IHsNCiAgYXBpS2V5OiAiQUl6YVN5RElYR1UzejZmSjlhNVplSkR2VThYZjVlMGNyUUU2cHA4IiwNCiAgYXV0aERvbWFpbjogInN0b3JlYXBwZnJvbnQtNDY1ZDUuZmlyZWJhc2VhcHAuY29tIiwNCiAgZGF0YWJhc2VVUkw6ICJodHRwczovL3N0b3JlYXBwZnJvbnQtNDY1ZDUuZmlyZWJhc2Vpby5jb20iLA0KICBwcm9qZWN0SWQ6ICJzdG9yZWFwcGZyb250LTQ2NWQ1IiwNCiAgc3RvcmFnZUJ1Y2tldDogInN0b3JlYXBwZnJvbnQtNDY1ZDUuYXBwc3BvdC5jb20iLA0KICBtZXNzYWdpbmdTZW5kZXJJZDogIjg0ODk2ODYzMTc4MSIsDQogIGFwcElkOiAiMTo4NDg5Njg2MzE3ODE6d2ViOmNiODlhOTY2YzZkNjNlYWE1MjFiMGMiLA0KICBtZWFzdXJlbWVudElkOiAiRy1FTEpQRlhGVFJWIg0KfTsNCg0KLy8gZmlyZWJhc2UuaW5pdGlhbGl6ZUFwcChmaXJlYmFzZUNvbmZpZykNCg0KbGV0IHVybCA9ICdodHRwOi8vbG9jYWxob3N0OjMwMDAvJzsNCnZhciB1cmxJbWFnZW4gPSAnaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL21lbmRlemZyZWl0ZXovU3RvcmVBcHBfQmFja0VuZC9tYXN0ZXIvaW1hZ2VuZXMnDQovLyBsZXQgdXJsID0gJ2h0dHBzOi8vc3RvcmVhcHAtYmFjay1lbmQuaGVyb2t1YXBwLmNvbS8nOw0KLy8gbGV0IHVybCA9ICdodHRwczovL2Nvc21pYy1lbnZveS0zMDEwMTIucmouci5hcHBzcG90LmNvbS8nOw0KdmFyIGFycmVnbG9JbWFnZW5lcyA9IFtdOw0KZXhwb3J0IGRlZmF1bHQgew0KICAgIG5hbWU6J051ZXZvUHJvZHVjdG8nLA0KICAgIGNvbXBvbmVudHM6ew0KICAgICAgICBJbnB1dEZvdG9zLCBNb2RhbA0KICAgIH0sDQogICAgZGF0YSgpIHsgIA0KICAgICAgcmV0dXJuIHsNCiAgICAgICAgZm9ybTogew0KICAgICAgICAgIG5vbWJyZTogJycsDQogICAgICAgICAgZGVzY3JpcGNpb246ICcnLA0KICAgICAgICAgIGNhdGVnb3JpYTogJycsDQogICAgICAgICAgcHJlY2lvOiAnJywNCiAgICAgICAgICBjYW50aWRhZDogJycsDQogICAgICAgICAgbm9tYnJlSW1hZ3M6IFtdLA0KICAgICAgICAgIGFwbGljYURlc2N1ZW50bzogZmFsc2UsDQogICAgICAgICAgaWRQcm9kdWN0bzonJywNCiAgICAgICAgICBkZXNjdWVudG86ew0KICAgICAgICAgICAgZGVzZGU6ICcnLA0KICAgICAgICAgICAgaGFzdGE6JycsDQogICAgICAgICAgICB0aXBvUG9yY2VudGFqZTp0cnVlLA0KICAgICAgICAgICAgdGlwb01vbnRvOmZhbHNlLA0KICAgICAgICAgICAgbW9udG9EZXNjdWVudG86JycsDQogICAgICAgICAgICBwb3JjZW50YWplRGVzY3VlbnRvOicnDQogICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBhcnJheUltYWdlbmVzOltdLA0KICAgICAgICBhcnJheUltYWdlbmVzXzpbXSwNCiAgICAgICAgZW5sYWNlc1VybDpbXSwNCiAgICAgICAgc2hvdzogdHJ1ZSwNCiAgICAgICAgYWN0aXZvVmVyOnRydWUsDQogICAgICAgIGFjdGl2b0J0blJlZ2lzdHJhcjogdHJ1ZSwNCiAgICAgICAgZGVzY3VlbnRvSGFiaWxpdGFkbzp0cnVlLA0KICAgICAgICBvcHRpb25zOiBbXSwNCiAgICAgICAgUmVnaXN0cm9FZGljaW9uOicnLA0KICAgICAgICBvY3VsdG86dHJ1ZQ0KICAgICAgfQ0KICAgIH0sDQogICAgY29tcHV0ZWQ6ew0KICAgICAgICAuLi5tYXBTdGF0ZShbJ3Byb2R1Y3Rvc1RvZG9zXycsICd1cmxQcm9kdWN0b3MnXSkNCiAgICB9LA0KICAgIHByb3BzOnsNCiAgICAgICAgcHJvcHNJbWc6ew0KICAgICAgICAgICAgaWQ6TnVtYmVyLA0KICAgICAgICAgICAgc3JjOlN0cmluZywNCiAgICAgICAgICAgIHRodW1ibmFpbDpTdHJpbmcNCiAgICAgICAgfSwNCiAgICAgICAgYXJyZWdsb0ZpbmFsOiBBcnJheSwNCiAgICAgICAgcHJvZHVjdG86IHVuZGVmaW5lZCwNCiAgICAgICAgLy8gaWRQcm9kdWN0byA6JycsDQogICAgICAgIEVsVGl0dWxvTW9kYWw6IFN0cmluZw0KICAgIH0sIA0KICAgIG1ldGhvZHM6IHsNCiAgICAgIC4uLm1hcE11dGF0aW9ucyhbJ3VwZGF0ZVByb2R1Y3Rvc1RvZG9zJ10pLA0KICAgICAgb25TdWJtaXQoZXZ0KSB7DQogICAgICAgIGlmICh0aGlzLmZvcm0uaWRQcm9kdWN0byA9PT0gdW5kZWZpbmVkKSB7IHRoaXMuZm9ybS5pZFByb2R1Y3RvID0gJycgfQ0KICAgICAgICBheGlvcy5wb3N0KGAke3VybH1OdWV2b1Byb2R1Y3RvYCwgdGhpcy5mb3JtLCB7IGhlYWRlcnM6IHsnY29udGVudC10eXBlJzonYXBwbGljYXRpb24vanNvbid9IH0pLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsNCiAgICAgICAgICB0aGlzLmd1YXJkYXJJbWFnZW5lcyh0aGlzLmFycmF5SW1hZ2VuZXNfLCB0aGlzLmFycmF5SW1hZ2VuZXMsIHJlc3AuZGF0YS5pZCkNCiAgICAgICAgICBheGlvcy5wb3N0KGAke3VybH10cmFlclRvZG9zYCx7IGlkOicnIH0pLnRoZW4oZnVuY3Rpb24ocmVzKXsNCiAgICAgICAgICAgIHRoaXMudXBkYXRlUHJvZHVjdG9zVG9kb3MocmVzLmRhdGEpDQogICAgICAgICAgfS5iaW5kKHRoaXMpKTsNCiAgICAgICAgfS5iaW5kKHRoaXMpKTsNCiAgICAgIH0sDQogICAgICBvblJlc2V0KGV2dCkgew0KICAgICAgICB0aGlzLmZvcm0ubm9tYnJlID0gJycNCiAgICAgICAgdGhpcy5mb3JtLmRlc2NyaXBjaW9uID0gJycNCiAgICAgICAgdGhpcy5mb3JtLmNhdGVnb3JpYSA9IG51bGwNCiAgICAgICAgdGhpcy5mb3JtLnByZWNpbyA9IG51bGwNCiAgICAgICAgdGhpcy5mb3JtLmNhbnRpZGFkID0gbnVsbA0KICAgICAgICB0aGlzLmZvcm0ubm9tYnJlSW1hZ3MgPSBudWxsDQogICAgICAgIHRoaXMuYWN0aXZvQnRuUmVnaXN0cmFyID0gdHJ1ZQ0KICAgICAgICB0aGlzLmFycmF5SW1hZ2VuZXMgPSBbXQ0KICAgICAgICAvLyB0aGlzLmVubGFjZXNVcmwgPSBbXQ0KICAgICAgICB0aGlzLnNob3cgPSBmYWxzZQ0KICAgICAgICB0aGlzLmZvcm0uZGVzY3VlbnRvLmRlc2RlID0gJycNCiAgICAgICAgdGhpcy5mb3JtLmRlc2N1ZW50by5oYXN0YSA9ICcnDQogICAgICAgIHRoaXMuZm9ybS5kZXNjdWVudG8udGlwb1BvcmNlbnRhamUgPSB0cnVlDQogICAgICAgIHRoaXMuZm9ybS5kZXNjdWVudG8udGlwb01vbnRvID0gZmFsc2UNCiAgICAgICAgdGhpcy5mb3JtLmRlc2N1ZW50by5tb250b0Rlc2N1ZW50byA9ICcnDQogICAgICAgIHRoaXMuZm9ybS5kZXNjdWVudG8ucG9yY2VudGFqZURlc2N1ZW50byA9ICcnDQogICAgICAgIHRoaXMuZm9ybS5hcGxpY2FEZXNjdWVudG8gPSBmYWxzZQ0KICAgICAgICB0aGlzLmRlc2N1ZW50b0hhYmlsaXRhZG8gPSB0cnVlDQogICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsNCiAgICAgICAgICAgIHRoaXMuc2hvdyA9IHRydWUNCiAgICAgICAgfSkNCiAgICAgIH0sDQogICAgICBjYW1iaWFyKCl7DQogICAgICAgIGxldCB0aGF0ID0gdGhpczsNCiAgICAgICAgdGhpcy4kd2F0Y2goKCkgPT4gew0KICAgICAgICAgIGlmKHRoYXQuYXJyYXlJbWFnZW5lcyAhPSB0aGF0LiRyZWZzLmlucHV0Rm90by5maWxlKXsNCiAgICAgICAgICAgIC8vIHRoaXMuZm9ybS5kYXRhSW1hZ3MgPSB0aGlzLiRyZWZzLmlucHV0Rm90by5maWxlDQogICAgICAgICAgICB0aGF0LmFycmF5SW1hZ2VuZXMgPSB0aGF0LiRyZWZzLmlucHV0Rm90by5maWxlDQoNCiAgICAgICAgICAgIHRoYXQuZm9ybS5kYXRhSW1hZ3MgPSB0aGF0LiRyZWZzLmlucHV0Rm90by5maWxlOw0KDQogICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmFycmF5SW1hZ2VuZXMpOw0KDQogICAgICAgICAgICBjb25zdCB0b0Jhc2U2NCA9IGZpbGUgPT4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gew0KICAgICAgICAgICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOw0KICAgICAgICAgICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTsNCiAgICAgICAgICAgICAgcmVhZGVyLm9ubG9hZCA9ICgpID0+IHJlc29sdmUocmVhZGVyLnJlc3VsdCk7DQogICAgICAgICAgICAgIHJlYWRlci5vbmVycm9yID0gZXJyb3IgPT4gcmVqZWN0KGVycm9yKTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGhhdC5hcnJheUltYWdlbmVzLmxlbmd0aCk7DQogICAgICAgICAgICAgbGV0IGVzbyA9IHRoaXM7DQogICAgICAgICAgICBhc3luYyBmdW5jdGlvbiBjb252ZXJ0X0Jhc2U2NCgpew0KICAgICAgICAgICAgICBmb3IodmFyIHQgPSAwOyB0IDwgdGhhdC5hcnJheUltYWdlbmVzLmxlbmd0aDsgdCsrKXsNCiAgICAgICAgICAgICAgICB0aGF0LmZvcm0uZGF0YUltYWdzW3RdID0gKGF3YWl0IHRvQmFzZTY0KHRoYXQuJHJlZnMuaW5wdXRGb3RvLmZpbGVbdF0pKTsNCiAgICAgICAgICAgICAgICBhcnJlZ2xvSW1hZ2VuZXMucHVzaCh7IGlkOnRoYXQuZm9ybS5ub21icmVJbWFnc1t0XSwgc3JjOnRoYXQuZm9ybS5kYXRhSW1hZ3NbdF0sIHRodW1ibmFpbDp0aGF0LmZvcm0uZGF0YUltYWdzW3RdIH0pDQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNvbnZlcnRfQmFzZTY0KCk7DQogICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICAgIH0sDQogICAgICB2aXN0YVByZXZpYU1vZGFsKCl7DQogICAgICAgIGNvbnNvbGUubG9nKHRoaXMuYXJyYXlJbWFnZW5lc18pDQogICAgICAgIHRoaXMuJHJlZnMuZWxNb2RhbC5hcnJheUltYWdlbmVzID0gdGhpcy5hcnJheUltYWdlbmVzXw0KICAgICAgICB0aGlzLiRidk1vZGFsLnNob3coIm1vZGFsXzEiKTsNCiAgICAgIH0sDQogICAgICBmb3JtYXROYW1lcyhmaWxlcykgew0KICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGZpbGVzKTsNCiAgICAgICAgaWYgKGZpbGVzLmxlbmd0aCA9PT0gMSkgew0KICAgICAgICAgIHJldHVybiBmaWxlc1swXS5uYW1lDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgcmV0dXJuIGAke2ZpbGVzLmxlbmd0aH0gSW3DoWdlbmVzIFNlbGVjY2lvbmFkYXNgOw0KICAgICAgICAgIGFsZXJ0KGAke2ZpbGVzLmxlbmd0aH0gSW3DoWdlbmVzIFNlbGVjY2lvbmFkYXNgKTsNCiAgICAgICAgfQ0KICAgICAgfSwNCiAgICAgIGhhYmlsaXRhckJvdG9uKCl7DQogICAgICAgIHZhciBhcmNoaXZvcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNJbWFnZW5lc19BcnJheSIpLmZpbGVzOw0KICAgICAgICBpZihhcmNoaXZvcy5sZW5ndGggPiAwKXsNCiAgICAgICAgICB0aGlzLmFjdGl2b1ZlciA9IGZhbHNlOw0KICAgICAgICB9DQogICAgICAgIGVsc2V7DQogICAgICAgICAgdGhpcy5hY3Rpdm9WZXIgPSB0cnVlOw0KICAgICAgICB9DQogICAgICB9LA0KICAgICAgY2FtYmlvVW5JbnB1dCgpew0KICAgICAgICBpZih0aGlzLmZvcm0ubm9tYnJlICE9ICcnICYmIHRoaXMuZm9ybS5kZXNjcmlwY2lvbiAhPSAnJyAmJiB0aGlzLmZvcm0ucHJlY2lvICE9ICcnICYmIHRoaXMuZm9ybS5jYXRlZ29yaWEgIT0gbnVsbCAmJiB0aGlzLmZvcm0uY2FudGlkYWQgIT0gJycgKXsNCiAgICAgICAgICAgIHRoaXMuYWN0aXZvQnRuUmVnaXN0cmFyID0gZmFsc2U7DQoNCg0KICAgICAgICAgIGlmKHRoaXMuZm9ybS5hcGxpY2FEZXNjdWVudG8gPT09IHRydWUpew0KICAgICAgICAgICAgaWYodGhpcy5mb3JtLmRlc2N1ZW50by5kZXNkZSAhPSAnJyAmJiB0aGlzLmZvcm0uZGVzY3VlbnRvLmhhc3RhICE9ICcnICYmIHRoaXMuZm9ybS5kZXNjdWVudG8ubW9udG9EZXNjdWVudG8gIT0gJycpew0KICAgICAgICAgICAgICB0aGlzLmFjdGl2b0J0blJlZ2lzdHJhciA9IGZhbHNlOyAvL0RJU0FCTEVEPSJGQUxTRSIgLS0+IEJUTiBIQUJJTElUQURPDQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlew0KICAgICAgICAgICAgICB0aGlzLmFjdGl2b0J0blJlZ2lzdHJhciA9IHRydWU7IC8vRElTQUJMRUQ9IlRSVUUiIC0tPiBCVE4gREVTSEFCSUxJVEFETw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgICBlbHNlew0KICAgICAgICAgICAgdGhpcy5hY3Rpdm9CdG5SZWdpc3RyYXIgPSBmYWxzZTsgLy9ESVNBQkxFRD0iRkFMU0UiIC0tPiBCVE4gSEFCSUxJVEFETw0KICAgICAgICAgIH0NCg0KDQogICAgICAgIH0NCiAgICAgICAgZWxzZXsNCiAgICAgICAgICAgIHRoaXMuYWN0aXZvQnRuUmVnaXN0cmFyID0gdHJ1ZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vI3JlZ2lvbiBIQUJJTElUQVIgRUwgQk9UT04gREUgREVTQ1VFTlRPIEVOIENBU08gREUgSEFCRVIgSU5HUkVTQURPIFVOIFBSRUNJTywgU0UgTk8gSEFCRVJMTw0KICAgICAgICBpZih0aGlzLmZvcm0ucHJlY2lvICE9ICcnKXsNCiAgICAgICAgICB0aGlzLmRlc2N1ZW50b0hhYmlsaXRhZG8gPSBmYWxzZTsgLy9ESVNBQkxFRD0iRkFMU0UiIC0tPiBCVE4gSEFCSUxJVEFETw0KICAgICAgICAgIC8vIHRoaXMuZm9ybS5hcGxpY2FEZXNjdWVudG8gPSBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlew0KICAgICAgICAgIHRoaXMuZGVzY3VlbnRvSGFiaWxpdGFkbyA9IHRydWU7IC8vRElTQUJMRUQ9IlRSVUUiIC0tPiBCVE4gREVTSEFCSUxJVEFETw0KICAgICAgICAgIHRoaXMuZm9ybS5kZXNjdWVudG8udGlwb1BvcmNlbnRhamUgPSB0cnVlOw0KICAgICAgICAgIHRoaXMuZm9ybS5kZXNjdWVudG8udGlwb01vbnRvID0gZmFsc2U7DQogICAgICAgICAgdGhpcy5mb3JtLmRlc2N1ZW50by5kZXNkZSA9ICcnOw0KICAgICAgICAgIHRoaXMuZm9ybS5kZXNjdWVudG8uaGFzdGEgPSAnJzsNCiAgICAgICAgICB0aGlzLmZvcm0uZGVzY3VlbnRvLm1vbnRvRGVzY3VlbnRvID0gJyc7DQogICAgICAgICAgdGhpcy5mb3JtLmRlc2N1ZW50by5wb3JjZW50YWplRGVzY3VlbnRvID0gJyc7DQogICAgICAgICAgdGhpcy5mb3JtLmFwbGljYURlc2N1ZW50byA9IGZhbHNlOw0KICAgICAgICB9DQogICAgICAgIC8vI2VuZHJlZ2lvbg0KDQogICAgICAgIC8vI3JlZ2lvbiBWRVIgU0kgSEFZIERFU0NVRU5UTyBBQ1RJVkFETywgWSBFTiBDQVNPIERFIEVTVEFSIEFDVElWQURPIFZFUiBTSSBUT0RPUyBTVVMgQ0FNUE9TIFNFIExMRU5BUk9ODQoNCg0KICAgICAgICAvLyBpZih0aGlzLmZvcm0ucHJlY2lvICE9ICcnKXsNCiAgICAgICAgLy8gICBpZih0aGlzLmZvcm0uYXBsaWNhRGVzY3VlbnRvID09PSB0cnVlKXsNCiAgICAgICAgLy8gICAgIGlmKHRoaXMuZm9ybS5kZXNjdWVudG8uZGVzZGUgIT0gJycgJiYgdGhpcy5mb3JtLmRlc2N1ZW50by5oYXN0YSAhPSAnJyAmJiB0aGlzLmZvcm0uZGVzY3VlbnRvLm1vbnRvRGVzY3VlbnRvICE9ICcnKXsNCiAgICAgICAgLy8gICAgICAgdGhpcy5hY3Rpdm9CdG5SZWdpc3RyYXIgPSBmYWxzZTsgLy9ESVNBQkxFRD0iRkFMU0UiIC0tPiBCVE4gSEFCSUxJVEFETw0KICAgICAgICAvLyAgICAgfQ0KICAgICAgICAvLyAgICAgZWxzZXsNCiAgICAgICAgLy8gICAgICAgdGhpcy5hY3Rpdm9CdG5SZWdpc3RyYXIgPSB0cnVlOyAvL0RJU0FCTEVEPSJUUlVFIiAtLT4gQlROIERFU0hBQklMSVRBRE8NCiAgICAgICAgLy8gICAgIH0NCiAgICAgICAgLy8gICB9DQogICAgICAgIC8vICAgZWxzZXsNCiAgICAgICAgLy8gICAgIHRoaXMuYWN0aXZvQnRuUmVnaXN0cmFyID0gZmFsc2U7IC8vRElTQUJMRUQ9IkZBTFNFIiAtLT4gQlROIEhBQklMSVRBRE8NCiAgICAgICAgLy8gICB9ICAgICAgICAgIA0KICAgICAgICAvLyB9DQogICAgICAgIC8vIGVsc2V7DQogICAgICAgIC8vICAgdGhpcy5hY3Rpdm9CdG5SZWdpc3RyYXIgPSB0cnVlOyAvL0RJU0FCTEVEPSJUUlVFIiAtLT4gQlROIERFU0hBQklMSVRBRE8NCiAgICAgICAgLy8gfQ0KDQoNCiAgICAgICAgLy8jZW5kcmVnaW9uDQogICAgICB9LA0KICAgICAgY2FtYmlvSW5wdXRQcmVjaW8oKXsNCiAgICAgICAgaWYodGhpcy5mb3JtLm5vbWJyZSAhPSAnJyAmJiB0aGlzLmZvcm0uZGVzY3JpcGNpb24gIT0gJycgJiYgdGhpcy5mb3JtLnByZWNpbyAhPSAnJyAmJiB0aGlzLmZvcm0uY2F0ZWdvcmlhICE9IG51bGwgJiYgdGhpcy5mb3JtLmNhbnRpZGFkICE9ICcnICl7DQogICAgICAgICAgICB0aGlzLmFjdGl2b0J0blJlZ2lzdHJhciA9IGZhbHNlOw0KDQoNCiAgICAgICAgICBpZih0aGlzLmZvcm0uYXBsaWNhRGVzY3VlbnRvID09PSB0cnVlKXsNCiAgICAgICAgICAgIGlmKHRoaXMuZm9ybS5kZXNjdWVudG8uZGVzZGUgIT0gJycgJiYgdGhpcy5mb3JtLmRlc2N1ZW50by5oYXN0YSAhPSAnJyAmJiB0aGlzLmZvcm0uZGVzY3VlbnRvLm1vbnRvRGVzY3VlbnRvICE9ICcnKXsNCiAgICAgICAgICAgICAgdGhpcy5hY3Rpdm9CdG5SZWdpc3RyYXIgPSBmYWxzZTsgLy9ESVNBQkxFRD0iRkFMU0UiIC0tPiBCVE4gSEFCSUxJVEFETw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZXsNCiAgICAgICAgICAgICAgdGhpcy5hY3Rpdm9CdG5SZWdpc3RyYXIgPSB0cnVlOyAvL0RJU0FCTEVEPSJUUlVFIiAtLT4gQlROIERFU0hBQklMSVRBRE8NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgICAgZWxzZXsNCiAgICAgICAgICAgIHRoaXMuYWN0aXZvQnRuUmVnaXN0cmFyID0gZmFsc2U7IC8vRElTQUJMRUQ9IkZBTFNFIiAtLT4gQlROIEhBQklMSVRBRE8NCiAgICAgICAgICB9DQoNCg0KDQogICAgICAgIH0NCiAgICAgICAgZWxzZXsNCiAgICAgICAgICAgIHRoaXMuYWN0aXZvQnRuUmVnaXN0cmFyID0gdHJ1ZTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vI3JlZ2lvbiBIQUJJTElUQVIgRUwgQk9UT04gREUgREVTQ1VFTlRPIEVOIENBU08gREUgSEFCRVIgSU5HUkVTQURPIFVOIFBSRUNJTywgU0UgTk8gSEFCRVJMTw0KICAgICAgICBpZih0aGlzLmZvcm0ucHJlY2lvICE9ICcnKXsNCiAgICAgICAgICB0aGlzLmRlc2N1ZW50b0hhYmlsaXRhZG8gPSBmYWxzZTsgLy9ESVNBQkxFRD0iRkFMU0UiIC0tPiBCVE4gSEFCSUxJVEFETw0KICAgICAgICAgIC8vIHRoaXMuZm9ybS5hcGxpY2FEZXNjdWVudG8gPSBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlew0KICAgICAgICAgIHRoaXMuZGVzY3VlbnRvSGFiaWxpdGFkbyA9IHRydWU7IC8vRElTQUJMRUQ9IlRSVUUiIC0tPiBCVE4gREVTSEFCSUxJVEFETw0KICAgICAgICAgIHRoaXMuZm9ybS5kZXNjdWVudG8udGlwb1BvcmNlbnRhamUgPSB0cnVlOw0KICAgICAgICAgIHRoaXMuZm9ybS5kZXNjdWVudG8udGlwb01vbnRvID0gZmFsc2U7DQogICAgICAgICAgdGhpcy5mb3JtLmRlc2N1ZW50by5kZXNkZSA9ICcnOw0KICAgICAgICAgIHRoaXMuZm9ybS5kZXNjdWVudG8uaGFzdGEgPSAnJzsNCiAgICAgICAgICB0aGlzLmZvcm0uZGVzY3VlbnRvLm1vbnRvRGVzY3VlbnRvID0gJyc7DQogICAgICAgICAgdGhpcy5mb3JtLmRlc2N1ZW50by5wb3JjZW50YWplRGVzY3VlbnRvID0gJyc7DQogICAgICAgICAgdGhpcy5mb3JtLmFwbGljYURlc2N1ZW50byA9IGZhbHNlOw0KICAgICAgICB9DQogICAgICAgIC8vI2VuZHJlZ2lvbg0KDQogICAgICAgIC8vI3JlZ2lvbiBWRVIgU0kgSEFZIERFU0NVRU5UTyBBQ1RJVkFETywgWSBFTiBDQVNPIERFIEVTVEFSIEFDVElWQURPIFZFUiBTSSBUT0RPUyBTVVMgQ0FNUE9TIFNFIExMRU5BUk9ODQoNCg0KICAgICAgICAvLyBpZih0aGlzLmZvcm0ucHJlY2lvICE9ICcnKXsNCiAgICAgICAgLy8gICBpZih0aGlzLmZvcm0uYXBsaWNhRGVzY3VlbnRvID09PSB0cnVlKXsNCiAgICAgICAgLy8gICAgIGlmKHRoaXMuZm9ybS5kZXNjdWVudG8uZGVzZGUgIT0gJycgJiYgdGhpcy5mb3JtLmRlc2N1ZW50by5oYXN0YSAhPSAnJyAmJiB0aGlzLmZvcm0uZGVzY3VlbnRvLm1vbnRvRGVzY3VlbnRvICE9ICcnKXsNCiAgICAgICAgLy8gICAgICAgdGhpcy5hY3Rpdm9CdG5SZWdpc3RyYXIgPSBmYWxzZTsgLy9ESVNBQkxFRD0iRkFMU0UiIC0tPiBCVE4gSEFCSUxJVEFETw0KICAgICAgICAvLyAgICAgfQ0KICAgICAgICAvLyAgICAgZWxzZXsNCiAgICAgICAgLy8gICAgICAgdGhpcy5hY3Rpdm9CdG5SZWdpc3RyYXIgPSB0cnVlOyAvL0RJU0FCTEVEPSJUUlVFIiAtLT4gQlROIERFU0hBQklMSVRBRE8NCiAgICAgICAgLy8gICAgIH0NCiAgICAgICAgLy8gICB9DQogICAgICAgIC8vICAgZWxzZXsNCiAgICAgICAgLy8gICAgIHRoaXMuYWN0aXZvQnRuUmVnaXN0cmFyID0gZmFsc2U7IC8vRElTQUJMRUQ9IkZBTFNFIiAtLT4gQlROIEhBQklMSVRBRE8NCiAgICAgICAgLy8gICB9ICAgICAgICAgIA0KICAgICAgICAvLyB9DQogICAgICAgIC8vIGVsc2V7DQogICAgICAgIC8vICAgdGhpcy5hY3Rpdm9CdG5SZWdpc3RyYXIgPSB0cnVlOyAvL0RJU0FCTEVEPSJUUlVFIiAtLT4gQlROIERFU0hBQklMSVRBRE8NCiAgICAgICAgLy8gfQ0KDQoNCiAgICAgICAgLy8jZW5kcmVnaW9uDQogICAgICB9LA0KICAgICAgY2FtYmlvVGlwb0Rlc2N1ZW50bygpew0KICAgICAgICB0aGlzLmZvcm0uZGVzY3VlbnRvLnRpcG9Qb3JjZW50YWplID0gIXRoaXMuZm9ybS5kZXNjdWVudG8udGlwb1BvcmNlbnRhamU7DQogICAgICAgIHRoaXMuZm9ybS5kZXNjdWVudG8udGlwb01vbnRvID0gIXRoaXMuZm9ybS5kZXNjdWVudG8udGlwb01vbnRvOw0KICAgICAgICB0aGlzLmZvcm0uZGVzY3VlbnRvLm1vbnRvRGVzY3VlbnRvID0gJyc7DQogICAgICAgIHRoaXMuZm9ybS5kZXNjdWVudG8ucG9yY2VudGFqZURlc2N1ZW50byA9ICcnOw0KICAgICAgICB0aGlzLmFjdGl2b0J0blJlZ2lzdHJhciA9IHRydWU7IC8vRElTQUJMRUQ9IkZBTFNFIiAtLT4gQlROIERFU0hBQklMSVRBRE8NCiAgICAgIH0sDQogICAgICBjYW1iaW9EZXNjdWVudG9Qb3JjKGUpew0KICAgICAgICBpZihwYXJzZUZsb2F0KHRoaXMuZm9ybS5kZXNjdWVudG8ucG9yY2VudGFqZURlc2N1ZW50bykgPiBwYXJzZUZsb2F0KGUudGFyZ2V0Lm1heCkpew0KICAgICAgICAgIGFsZXJ0KGBFbCBwb3JjZW50YWplIGRlIGRlc2N1ZW50byBubyBwdWVkZSBleGNlZGVyIGVsICR7ZS50YXJnZXQubWF4fSVgKTsNCiAgICAgICAgICB0aGlzLmZvcm0uZGVzY3VlbnRvLnBvcmNlbnRhamVEZXNjdWVudG8gPSAnJzsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlew0KICAgICAgICAgIHRoaXMuZm9ybS5kZXNjdWVudG8ubW9udG9EZXNjdWVudG8gPSAodGhpcy5mb3JtLnByZWNpbyAqICh0aGlzLmZvcm0uZGVzY3VlbnRvLnBvcmNlbnRhamVEZXNjdWVudG8gLyAxMDApKS50b0ZpeGVkKDEpDQogICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5mb3JtKQ0KICAgICAgICB9DQoNCiAgICAgICAgDQogICAgICAgIC8vIGNvbnNvbGUubG9nKCdkZXNkZTogICcgKyB0aGlzLmZvcm0uZGVzY3VlbnRvLmRlc2RlKQ0KICAgICAgICAvLyBjb25zb2xlLmxvZygnaGFzdGE6ICAnICsgdGhpcy5mb3JtLmRlc2N1ZW50by5oYXN0YSkNCiAgICAgICAgLy8gY29uc29sZS5sb2coJ21vbnRvOiAgJyArIHRoaXMuZm9ybS5kZXNjdWVudG8ubW9udG9EZXNjdWVudG8pDQogICAgICAgIC8vIGNvbnNvbGUubG9nKCdwb3JjZTogICcgKyB0aGlzLmZvcm0uZGVzY3VlbnRvLnBvcmNlbnRhamVEZXNjdWVudG8pDQoNCg0KICAgICAgICBpZih0aGlzLmZvcm0ubm9tYnJlICE9ICcnICYmIHRoaXMuZm9ybS5kZXNjcmlwY2lvbiAhPSAnJyAmJiB0aGlzLmZvcm0ucHJlY2lvICE9ICcnICYmIHRoaXMuZm9ybS5jYXRlZ29yaWEgIT0gbnVsbCAmJiB0aGlzLmZvcm0uY2FudGlkYWQgIT0gJycgJiYgdGhpcy5mb3JtLmRlc2N1ZW50by5wb3JjZW50YWplRGVzY3VlbnRvICE9ICcnICl7DQogICAgICAgICAgaWYodGhpcy5mb3JtLmRlc2N1ZW50by5kZXNkZSA9PT0gIiIgfHwgdGhpcy5mb3JtLmRlc2N1ZW50by5oYXN0YSA9PT0gIiIpew0KICAgICAgICAgICAgdGhpcy5hY3Rpdm9CdG5SZWdpc3RyYXIgPSB0cnVlOyAvL0RJU0FCTEVEPSJUUlVFIiAtLT4gQlROIERFU0hBQklMSVRBRE8NCiAgICAgICAgICB9DQogICAgICAgICAgZWxzZXsNCiAgICAgICAgICAgIHRoaXMuYWN0aXZvQnRuUmVnaXN0cmFyID0gZmFsc2U7IC8vRElTQUJMRUQ9IlRSVUUiIC0tPiBCVE4gSEFCSUxJVEFETw0KICAgICAgICAgIH0gIA0KICAgICAgICB9DQogICAgICAgIGVsc2V7DQogICAgICAgICAgICB0aGlzLmFjdGl2b0J0blJlZ2lzdHJhciA9IHRydWU7DQogICAgICAgIH0NCiAgICAgIH0sDQogICAgICBjYW1iaW9EZXNjdWVudG9Nb250byhlKXsNCiAgICAgICAgaWYocGFyc2VGbG9hdCh0aGlzLmZvcm0uZGVzY3VlbnRvLm1vbnRvRGVzY3VlbnRvKSA+IHBhcnNlRmxvYXQoZS50YXJnZXQubWF4KSl7DQogICAgICAgICAgYWxlcnQoYEVsIG1vbnRvIGRlIGRlc2N1ZW50byBubyBwdWVkZSBleGNlZGVyIGxvcyAke2UudGFyZ2V0Lm1heH0gQ0xQYCk7DQogICAgICAgICAgdGhpcy5mb3JtLmRlc2N1ZW50by5tb250b0Rlc2N1ZW50byA9ICcnOw0KICAgICAgICB9DQogICAgICAgIGVsc2V7DQogICAgICAgICAgdGhpcy5mb3JtLmRlc2N1ZW50by5wb3JjZW50YWplRGVzY3VlbnRvID0gKCh0aGlzLmZvcm0ucHJlY2lvIC0gKHRoaXMuZm9ybS5wcmVjaW8gLSB0aGlzLmZvcm0uZGVzY3VlbnRvLm1vbnRvRGVzY3VlbnRvKSkgLyB0aGlzLmZvcm0ucHJlY2lvKSAqIDEwMA0KICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuZm9ybSkNCiAgICAgICAgfQ0KICAgICAgICAvLyBjb25zb2xlLmxvZygnZGVzZGU6ICAnICsgdGhpcy5mb3JtLmRlc2N1ZW50by5kZXNkZSkNCiAgICAgICAgLy8gY29uc29sZS5sb2coJ2hhc3RhOiAgJyArIHRoaXMuZm9ybS5kZXNjdWVudG8uaGFzdGEpDQogICAgICAgIC8vIGNvbnNvbGUubG9nKCdtb250bzogICcgKyB0aGlzLmZvcm0uZGVzY3VlbnRvLm1vbnRvRGVzY3VlbnRvKQ0KICAgICAgICAvLyBjb25zb2xlLmxvZygncG9yY2U6ICAnICsgdGhpcy5mb3JtLmRlc2N1ZW50by5wb3JjZW50YWplRGVzY3VlbnRvKQ0KDQoNCiAgICAgICAgaWYodGhpcy5mb3JtLm5vbWJyZSAhPSAnJyAmJiB0aGlzLmZvcm0uZGVzY3JpcGNpb24gIT0gJycgJiYgdGhpcy5mb3JtLnByZWNpbyAhPSAnJyAmJiB0aGlzLmZvcm0uY2F0ZWdvcmlhICE9IG51bGwgJiYgdGhpcy5mb3JtLmNhbnRpZGFkICE9ICcnICYmIHRoaXMuZm9ybS5kZXNjdWVudG8ubW9udG9EZXNjdWVudG8gIT0gJycpew0KICAgICAgICAgIGlmKHRoaXMuZm9ybS5kZXNjdWVudG8uZGVzZGUgPT09ICIiIHx8IHRoaXMuZm9ybS5kZXNjdWVudG8uaGFzdGEgPT09ICIiKXsNCiAgICAgICAgICAgIHRoaXMuYWN0aXZvQnRuUmVnaXN0cmFyID0gdHJ1ZTsgLy9ESVNBQkxFRD0iVFJVRSIgLS0+IEJUTiBERVNIQUJJTElUQURPDQogICAgICAgICAgfQ0KICAgICAgICAgIGVsc2V7DQogICAgICAgICAgICB0aGlzLmFjdGl2b0J0blJlZ2lzdHJhciA9IGZhbHNlOyAvL0RJU0FCTEVEPSJUUlVFIiAtLT4gQlROIEhBQklMSVRBRE8NCiAgICAgICAgICB9ICANCiAgICAgICAgfQ0KICAgICAgICBlbHNlew0KICAgICAgICAgICAgdGhpcy5hY3Rpdm9CdG5SZWdpc3RyYXIgPSB0cnVlOw0KICAgICAgICB9DQogICAgICB9LA0KICAgICAgY2FtYmlvQXBsaWNhRGVzY3VlbnRvKCl7DQogICAgICAgIHRoaXMuZm9ybS5hcGxpY2FEZXNjdWVudG8gPSAhdGhpcy5mb3JtLmFwbGljYURlc2N1ZW50bzsNCiAgICAgICAgaWYodGhpcy5mb3JtLmFwbGljYURlc2N1ZW50byA9PT0gZmFsc2Upew0KICAgICAgICAgIHRoaXMuZm9ybS5kZXNjdWVudG8uZGVzZGUgPSAnJw0KICAgICAgICAgIHRoaXMuZm9ybS5kZXNjdWVudG8uaGFzdGEgPSAnJw0KICAgICAgICAgIHRoaXMuZm9ybS5kZXNjdWVudG8udGlwb1BvcmNlbnRhamUgPSB0cnVlDQogICAgICAgICAgdGhpcy5mb3JtLmRlc2N1ZW50by50aXBvTW9udG8gPSBmYWxzZQ0KICAgICAgICAgIHRoaXMuZm9ybS5kZXNjdWVudG8ubW9udG9EZXNjdWVudG8gPSAnJw0KICAgICAgICAgIHRoaXMuZm9ybS5kZXNjdWVudG8ucG9yY2VudGFqZURlc2N1ZW50byA9ICcnDQogICAgICAgICAgdGhpcy5jYW1iaW9JbnB1dFByZWNpbygpDQogICAgICAgIH0NCiAgICAgICAgZWxzZXsNCiAgICAgICAgICB0aGlzLmFjdGl2b0J0blJlZ2lzdHJhciA9IHRydWU7IC8vRElTQUJMRUQ9IkZBTFNFIiAtLT4gQlROIERFU0hBQklMSVRBRE8NCiAgICAgICAgfQ0KICAgICAgfSwNCiAgICAgIGd1YXJkYXJJbWFnZW5lcyhpbWFnZW5lcywgYXJjaGl2b3MsIG5vbWJyZUFyY2hpdm8pew0KICAgICAgICB2YXIgbW91bnRhaW5zUmVmID0gZmlyZWJhc2Uuc3RvcmFnZSgpLnJlZigpLmNoaWxkKGAvcHJvZHVjdG9zLyR7bm9tYnJlQXJjaGl2b31gKQ0KICAgICAgICAvLyB0aGlzLmlkUHJvZHVjdG8gPSBub21icmVBcmNoaXZvDQogICAgICAgIHZhciB0aGF0ID0gdGhpcw0KICAgICAgICBtb3VudGFpbnNSZWYubGlzdEFsbCgpDQogICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsNCiAgICAgICAgICBpZihyZXN1bHQuaXRlbXMubGVuZ3RoID4gMCl7DQogICAgICAgICAgICByZXN1bHQuaXRlbXMuZm9yRWFjaChmdW5jdGlvbiAoZmlsZSkgew0KICAgICAgICAgICAgICBmaWxlLmRlbGV0ZSgpDQogICAgICAgICAgICB9KQ0KICAgICAgICAgIH0gDQogICAgICAgIH0pDQogICAgICAgIC50aGVuKGFzeW5jIGZ1bmN0aW9uIGd1YXJkYWRvKCkgew0KICAgICAgICAgIHZhciBhcnJlZ2xvVXJscyA9IFtdDQogICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGltYWdlbmVzLmxlbmd0aDsgaW5kZXgrKykgew0KICAgICAgICAgICAgY29uc3QgZGF0byA9IGF3YWl0IGZpcmViYXNlLnN0b3JhZ2UoKS5yZWYoYC9wcm9kdWN0b3MvJHtub21icmVBcmNoaXZvLnJlcGxhY2UoLyAvZywnXycpfS8ke2ltYWdlbmVzW2luZGV4XS5pZH1gKS5wdXQoYXJjaGl2b3NbaW5kZXhdKQ0KICAgICAgICAgICAgdmFyIGdldFRva2VuID0gYXdhaXQgYXhpb3MuZ2V0KGBodHRwczovL2ZpcmViYXNlc3RvcmFnZS5nb29nbGVhcGlzLmNvbS92MC9iL3N0b3JlYXBwZnJvbnQtNDY1ZDUuYXBwc3BvdC5jb20vby8ke2RhdG8ubWV0YWRhdGEuZnVsbFBhdGgucmVwbGFjZSgvXC8vZywnJTJGJyl9YCkNCiAgICAgICAgICAgIGFycmVnbG9VcmxzLnB1c2goYCR7bm9tYnJlQXJjaGl2b30lMkYke2RhdG8ucmVmLm5hbWV9P2FsdD1tZWRpYSZ0b2tlbj0ke2dldFRva2VuLmRhdGEuZG93bmxvYWRUb2tlbnN9YCkNCiAgICAgICAgICB9DQoNCiAgICAgICAgICB2YXIgZGF0YSA9ICB7IGlkUHJvZHVjdG86IG5vbWJyZUFyY2hpdm8sIGltYWdlbmVzOmFycmVnbG9VcmxzIH0NCg0KICAgICAgICAgIGF4aW9zLnBvc3QoYCR7dXJsfWd1YXJkYXJJbWFnZW5lc2AsIGRhdGEsIHsgaGVhZGVyczogeydjb250ZW50LXR5cGUnOidhcHBsaWNhdGlvbi9qc29uJ30gfSkudGhlbihmdW5jdGlvbihyZXNwLCBlcnIpew0KICAgICAgICAgICAgdGhhdC4kYnZNb2RhbC5oaWRlKCdtb2RhbFByb2R1Y3RvJykNCiAgICAgICAgICAgIGlmKCFlcnIpew0KICAgICAgICAgICAgICB0aGF0LmVubGFjZXNVcmwgPSBbXQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZXsNCiAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pDQogICAgICAgIH0pDQogICAgICB9DQogICAgfSwgDQogICAgd2F0Y2g6ew0KICAgICAgYXJyYXlJbWFnZW5lczogZnVuY3Rpb24gKG52LCBvdikgew0KICAgICAgICBpZihudi5sZW5ndGggPiAwKXsNCiAgICAgICAgICB2YXIgYXJyZWdsb0ltYWdlbmVzID0gW10NCiAgICAgICAgICB2YXIgY29udmVydGlkbzsNCiAgICAgICAgICBjb25zdCB0b0Jhc2U2NCA9IGZpbGUgPT4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gew0KICAgICAgICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsNCiAgICAgICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpOw0KICAgICAgICAgICAgcmVhZGVyLm9ubG9hZCA9ICgpID0+IHJlc29sdmUocmVhZGVyLnJlc3VsdCk7DQogICAgICAgICAgICByZWFkZXIub25lcnJvciA9IGVycm9yID0+IHJlamVjdChlcnJvcik7DQogICAgICAgICAgfSk7DQogICAgICAgICAgYXN5bmMgZnVuY3Rpb24gY29udmVydF9CYXNlNjQoKXsNCiAgICAgICAgICAgIGZvcih2YXIgdCA9IDA7IHQgPCBudi5sZW5ndGg7IHQrKyl7DQogICAgICAgICAgICAgIGNvbnZlcnRpZG8gPSAoYXdhaXQgdG9CYXNlNjQobnZbdF0pKTsNCiAgICAgICAgICAgICAgYXJyZWdsb0ltYWdlbmVzLnB1c2goeyBpZDpudlt0XS5uYW1lLCBzcmM6Y29udmVydGlkbywgdGh1bWJuYWlsOmNvbnZlcnRpZG8gfSkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgICAgY29udmVydF9CYXNlNjQoKQ0KICAgICAgICAgIHRoaXMuYXJyYXlJbWFnZW5lc18gPSBhcnJlZ2xvSW1hZ2VuZXMgIA0KICAgICAgICB9DQogICAgICB9LA0KICAgICAgcHJvZHVjdG8obnVldm8pew0KICAgICAgICAgIHRoaXMuZGVzY3VlbnRvSGFiaWxpdGFkbyA9IGZhbHNlOw0KICAgICAgICAgIHRoaXMuZm9ybS5ub21icmUgPSBudWV2by5ub21icmU7DQogICAgICAgICAgdGhpcy5mb3JtLmRlc2NyaXBjaW9uID0gbnVldm8uZGVzY3JpcGNpb247DQogICAgICAgICAgdGhpcy5mb3JtLmNhdGVnb3JpYSA9IG51ZXZvLmNhdGVnb3JpYTsNCiAgICAgICAgICB0aGlzLmZvcm0ucHJlY2lvID0gbnVldm8ucHJlY2lvOw0KICAgICAgICAgIHRoaXMuZm9ybS5jYW50aWRhZCA9IG51ZXZvLmNhbnRpZGFkOw0KICAgICAgICAgIHRoaXMuZm9ybS5ub21icmVJbWFncyA9IG51ZXZvLm5vbWJyZUltYWdlbmVzOw0KICAgICAgICAgIHRoaXMuZm9ybS5pZFByb2R1Y3RvID0gbnVldm8uX2lkOw0KICAgICAgICAgIGlmKG51ZXZvLmFwbGljYURlc2N1ZW50byl7DQogICAgICAgICAgICB0aGlzLmZvcm0uYXBsaWNhRGVzY3VlbnRvID0gbnVldm8uYXBsaWNhRGVzY3VlbnRvOw0KICAgICAgICAgICAgdGhpcy5mb3JtLmRlc2N1ZW50by5kZXNkZSA9IG51ZXZvLmRlc2N1ZW50by5kZXNkZTsNCiAgICAgICAgICAgIHRoaXMuZm9ybS5kZXNjdWVudG8uaGFzdGEgPSBudWV2by5kZXNjdWVudG8uaGFzdGE7DQogICAgICAgICAgICB0aGlzLmZvcm0uZGVzY3VlbnRvLnRpcG9Qb3JjZW50YWplID0gbnVldm8uZGVzY3VlbnRvLnRpcG9Qb3JjZW50YWplOw0KICAgICAgICAgICAgdGhpcy5mb3JtLmRlc2N1ZW50by50aXBvTW9udG8gPSBudWV2by5kZXNjdWVudG8udGlwb01vbnRvOw0KICAgICAgICAgICAgdGhpcy5mb3JtLmRlc2N1ZW50by5tb250b0Rlc2N1ZW50byA9IG51ZXZvLmRlc2N1ZW50by5tb250b0Rlc2N1ZW50bzsNCiAgICAgICAgICAgIHRoaXMuZm9ybS5kZXNjdWVudG8ucG9yY2VudGFqZURlc2N1ZW50byA9IG51ZXZvLmRlc2N1ZW50by5wb3JjZW50YWplRGVzY3VlbnRvOw0KICAgICAgICAgIH0NCiAgICAgICAgICBlbHNlew0KICAgICAgICAgICAgdGhpcy5mb3JtLmFwbGljYURlc2N1ZW50byA9IGZhbHNlOw0KICAgICAgICAgICAgdGhpcy5mb3JtLmRlc2N1ZW50by5kZXNkZSA9ICcnDQogICAgICAgICAgICB0aGlzLmZvcm0uZGVzY3VlbnRvLmhhc3RhID0gJycNCiAgICAgICAgICAgIHRoaXMuZm9ybS5kZXNjdWVudG8udGlwb1BvcmNlbnRhamUgPSB0cnVlDQogICAgICAgICAgICB0aGlzLmZvcm0uZGVzY3VlbnRvLnRpcG9Nb250byA9IGZhbHNlDQogICAgICAgICAgICB0aGlzLmZvcm0uZGVzY3VlbnRvLm1vbnRvRGVzY3VlbnRvID0gJycNCiAgICAgICAgICAgIHRoaXMuZm9ybS5kZXNjdWVudG8ucG9yY2VudGFqZURlc2N1ZW50byA9ICcnDQogICAgICAgICAgfQ0KICAgICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vDQogICAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8NCiAgICAgICAgICB0aGlzLmFycmF5SW1hZ2VuZXNfID0gW10NCiAgICAgICAgICB0aGlzLmZvcm0ubm9tYnJlSW1hZ3MubWFwKGZ1bmN0aW9uKGUpew0KICAgICAgICAgICAgdGhpcy5hcnJheUltYWdlbmVzXy5wdXNoKHsgaWQ6ZSwgc3JjOmAke3VybEltYWdlbn0vJHt0aGlzLmZvcm0uaWRQcm9kdWN0b30vJHtlfWAsIHRodW1ibmFpbDpgJHt1cmxJbWFnZW59LyR7dGhpcy5mb3JtLmlkUHJvZHVjdG99LyR7ZX1gIH0pDQogICAgICAgICAgfS5iaW5kKHRoaXMpKQ0KICAgICAgICAgIC8vIHRoaXMuYXJyYXlJbWFnZW5lc18gPSBudWV2by5kYXRhSW1hZ2VuZXM7DQogICAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8NCiAgICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLw0KICAgICAgICAgIGlmKHRoaXMuZm9ybS5ub21icmUgIT0gJycpew0KICAgICAgICAgICAgdGhpcy5hY3Rpdm9CdG5SZWdpc3RyYXIgPSBmYWxzZTsNCiAgICAgICAgICB9DQogICAgICB9DQogICAgfSwNCiAgICBtb3VudGVkKCl7DQogICAgICB0aGlzLm9wdGlvbnMucHVzaCh7ICd2YWx1ZSc6bnVsbCwgJ3RleHQnOidDYXRlZ29yw61hJ30pDQogICAgICBheGlvcy5nZXQoYCR7dXJsfXRyYWVyQ2F0ZWdvcmlhc2ApLnRoZW4oZnVuY3Rpb24ocmVzcCl7DQogICAgICAgIHJlc3AuZGF0YS5tYXAoZnVuY3Rpb24ob2JqKXsNCiAgICAgICAgICB0aGlzLm9wdGlvbnMucHVzaCh7ICd2YWx1ZSc6b2JqLl9pZCwgJ3RleHQnOm9iai5ub21icmUgfSkNCiAgICAgICAgfS5iaW5kKHRoaXMpKQ0KICAgICAgfS5iaW5kKHRoaXMpKQ0KICAgIH0NCn0NCg=="},{"version":3,"sources":["modalProducto.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoNA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"modalProducto.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div>\r\n    <b-modal id=\"modalProducto\"\r\n    :title=\"ElTituloModal\"\r\n    header-bg-variant=\"dark\"\r\n    header-text-variant=\"light\"\r\n    cancel-variant=\"outline-danger\"\r\n    ok-variant=\"outline-primary\"\r\n    ok-title=\"Agregar Categoría\"\r\n    cancel-title=\"Cerrar\"\r\n    @ok=\"onSubmit\"\r\n    centered\r\n    >\r\n        <div class=\"mt-3 pl-2 pr-2\">\r\n            <b-form @reset=\"onReset\" v-if=\"show\">\r\n                <div>\r\n                  <!-- Styled -->\r\n                  <b-form-file\r\n                    class=\"text-left border-bottom-0 mb-3\"\r\n                    id=\"Imagenes_Array\"\r\n                    accept=\"image/*\"\r\n                    multiple\r\n                    :file-name-formatter=\"formatNames\"\r\n                    v-model=\"arrayImagenes\"\r\n                    @blur=\"cambioUnInput\"\r\n                    placeholder=\"Imágenes Producto\"\r\n                    drop-placeholder=\"Drop file here...\"\r\n                    size=\"sm\"\r\n                  ></b-form-file>\r\n                </div>\r\n                \r\n                <b-form-group id=\"input-group-1\">\r\n                  <b-form-input\r\n                    @keydown=\"cambioUnInput\"\r\n                    id=\"input-1\"\r\n                    v-model=\"form.nombre\"\r\n                    type=\"text\"\r\n                    required\r\n                    placeholder=\"Nombre Producto\"\r\n                    autocomplete=\"off\"\r\n                    name=\"nombre\"\r\n                    size=\"sm\"\r\n                  ></b-form-input>\r\n                </b-form-group>\r\n\r\n                <b-form-group id=\"input-group-2\">   \r\n                  <b-form-input\r\n                    @keydown=\"cambioUnInput\"\r\n                    id=\"input-2\"\r\n                    v-model=\"form.descripcion\"\r\n                    required\r\n                    placeholder=\"Descripción Producto\"\r\n                    autocomplete=\"off\"\r\n                    type=\"text\"\r\n                    name=\"descripcion\"\r\n                    size=\"sm\"\r\n                  ></b-form-input>\r\n                </b-form-group>\r\n\r\n                <b-form-group>\r\n                  <b-form-select\r\n                    v-model=\"form.categoria\"\r\n                    :options=\"options\"\r\n                    @change=\"cambioUnInput\"\r\n                    size=\"sm\"\r\n                  ></b-form-select>\r\n                </b-form-group>\r\n\r\n                <b-form-group id=\"input-group-4\">\r\n                  <b-form-input\r\n                    @keydown=\"cambioUnInput\"\r\n                    id=\"input-4\"\r\n                    v-model=\"form.cantidad\"\r\n                    required\r\n                    placeholder=\"Cantidad\"\r\n                    type=\"number\"\r\n                    name=\"cantidad\" \r\n                    size=\"sm\"\r\n                  ></b-form-input>\r\n                </b-form-group>\r\n\r\n                <b-form-group id=\"input-group-3\">\r\n                  <b-form-input\r\n                    @change=\"cambioInputPrecio\"\r\n                    id=\"input-precio\"\r\n                    autocomplete=\"off\"\r\n                    v-model=\"form.precio\"\r\n                    required\r\n                    placeholder=\"Precio\"\r\n                    type=\"number\"\r\n                    name=\"precio\"\r\n                    size=\"sm\"\r\n                  ></b-form-input>\r\n                </b-form-group>\r\n\r\n                <b-card class=\"mb-3 pb-2 pl-2\">\r\n                   <b-form-group class=\"mb-2\">\r\n                    <b-form-checkbox :disabled=\"descuentoHabilitado\" v-model=\"form.aplicaDescuento\" @change=\"cambioAplicaDescuento\" name=\"check-button\" switch size=\"lg\" class=\" mt-1\">\r\n                      Aplica Descuento\r\n                    </b-form-checkbox>\r\n                   </b-form-group>                  \r\n                  <div :hidden=\"!form.aplicaDescuento\" class=\"pr-2\">\r\n                    <b-card class=\"pl-2 pr-2 mb-2\">\r\n                      <div class=\"w-50 pr-1\" style=\"display:inline-block;\">\r\n                        <b-form-group id=\"input-group-5\" class=\"mb-0\">\r\n                          <label class=\"mb-0 lbl\"><i>Fecha Inicio</i></label>\r\n                          <b-form-datepicker\r\n                          label-no-date-selected=\"Fecha Inicio\"\r\n                          size=\"sm\"\r\n                          name=\"desde\"\r\n                          id=\"input-desde\"\r\n                          v-model=\"form.descuento.desde\"\r\n                          locale=\"es\"\r\n                          :date-format-options=\"{ year: 'numeric', month: 'numeric', day: 'numeric' }\">\r\n                          </b-form-datepicker>\r\n                        </b-form-group>\r\n                      </div>\r\n\r\n                      <div class=\"w-50 pl-1\" style=\"display:inline-block;\">\r\n                        <b-form-group id=\"input-group-6\" class=\"mb-0\">\r\n                          <label class=\"mb-0 lbl\"><i>Fecha Fin</i></label>\r\n                          <b-form-datepicker\r\n                            label-no-date-selected=\"Fecha Fin\"\r\n                            size=\"sm\"\r\n                            name=\"hasta\"\r\n                            id=\"input-hasta\"\r\n                            v-model=\"form.descuento.hasta\"\r\n                            locale=\"es\"\r\n                            :date-format-options=\"{ year: 'numeric', month: 'numeric', day: 'numeric' }\">\r\n                            </b-form-datepicker>\r\n                        </b-form-group>\r\n                      </div>\r\n                    </b-card>\r\n\r\n                      <b-card class=\"pl-2 pr-2\">\r\n                          <div class=\"w-50\" id=\"parte1\" style=\"display:inline-block;\">\r\n                            <b-form-group class=\"mb-0\">\r\n                              <b-form-checkbox\r\n                              v-model=\"form.descuento.tipoPorcentaje\"\r\n                              @change=\"cambioTipoDescuento\"\r\n                              name=\"check-button\"\r\n                              switch\r\n                              size=\"lg\"\r\n                              style=\"display:inline-block; width:130px;\"\r\n                              >\r\n                                Porcentaje\r\n                              </b-form-checkbox>\r\n                              \r\n                              <b-form-checkbox\r\n                              v-model=\"form.descuento.tipoMonto\"\r\n                              @change=\"cambioTipoDescuento\"\r\n                              name=\"check-button\"\r\n                              switch\r\n                              size=\"lg\"\r\n                              style=\"display:inline-block;\">\r\n                                Monto\r\n                              </b-form-checkbox>\r\n                            </b-form-group>\r\n                          </div>\r\n                          <div class=\"w-50\" id=\"parte2\" style=\"display:inline-block;\">\r\n                                <b-form-group :hidden=\"form.descuento.tipoMonto\" class=\"mb-0\">\r\n                                  <b-input-group size=\"sm\" prepend=\"%\" class=\"mb-2\">\r\n                                    <b-form-input\r\n                                      @keyup=\"cambioDescuentoPorc\"\r\n                                      type=\"number\"\r\n                                      :min=\"0\"\r\n                                      :max=\"100\"\r\n                                      id=\"inline-form-input-porcentaje\"\r\n                                      placeholder=\"Porcentaje\"\r\n                                      v-model=\"form.descuento.porcentajeDescuento\"\r\n                                    ></b-form-input>\r\n                                  </b-input-group>\r\n                                </b-form-group>\r\n                                <b-form-group :hidden=\"form.descuento.tipoPorcentaje\" class=\"mb-0\">\r\n                                  <b-input-group size=\"sm\" prepend=\"CLP\" class=\"mb-2\">\r\n                                    <b-form-input\r\n                                      @keyup=\"cambioDescuentoMonto\"\r\n                                      type=\"number\"\r\n                                      :min=\"0\"\r\n                                      :max=\"form.precio\"\r\n                                      id=\"inline-form-input-monto\"\r\n                                      placeholder=\"Monto\"\r\n                                      v-model=\"form.descuento.montoDescuento\"\r\n                                    ></b-form-input>\r\n                                  </b-input-group>\r\n                                </b-form-group>\r\n                          </div>\r\n                      </b-card>\r\n                  </div>\r\n                </b-card>\r\n            </b-form>\r\n\r\n            <Modal ref=\"elModal\" :tituloModal=\"form.nombre\" :textoModal=\"form.descripcion\"></Modal>\r\n            \r\n        </div>\r\n\r\n        <template v-slot:modal-footer>\r\n            <div :hidden=\"!oculto\" class=\"text-center mt-3\">\r\n                <!-- <b-button :disabled=\"activoBtnRegistrar\" type=\"button\" @click=\"vistaPreviaModal\" class=\"mr-2\" variant=\"outline-success\" size=\"sm\">Vista Previa</b-button> -->\r\n                <b-button @click=\"onReset\" class=\"mr-1\" variant=\"outline-danger\" size=\"sm\">Limpiar</b-button>\r\n                <b-button :disabled=\"activoBtnRegistrar\" type=\"button\" @click=\"onSubmit\" class=\"ml-1\" variant=\"outline-primary\" size=\"sm\">Guardar</b-button>\r\n\r\n            </div>\r\n            <div :hidden=\"oculto\" class=\"mt-3 mb-1\" style=\" width:100%!important; height:46px!important;\">\r\n              <div class=\"preloader\"></div>\r\n            </div>\r\n        </template>\r\n    </b-modal>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport firebase from 'firebase';\r\nimport Modal from './Modal'\r\nimport InputFotos from './InputFotos'\r\nimport axios from 'axios'\r\nimport { mapMutations, mapState } from 'vuex';\r\n\r\nvar firebaseConfig = {\r\n  apiKey: \"AIzaSyDIXGU3z6fJ9a5ZeJDvU8Xf5e0crQE6pp8\",\r\n  authDomain: \"storeappfront-465d5.firebaseapp.com\",\r\n  databaseURL: \"https://storeappfront-465d5.firebaseio.com\",\r\n  projectId: \"storeappfront-465d5\",\r\n  storageBucket: \"storeappfront-465d5.appspot.com\",\r\n  messagingSenderId: \"848968631781\",\r\n  appId: \"1:848968631781:web:cb89a966c6d63eaa521b0c\",\r\n  measurementId: \"G-ELJPFXFTRV\"\r\n};\r\n\r\n// firebase.initializeApp(firebaseConfig)\r\n\r\nlet url = 'http://localhost:3000/';\r\nvar urlImagen = 'https://raw.githubusercontent.com/mendezfreitez/StoreApp_BackEnd/master/imagenes'\r\n// let url = 'https://storeapp-back-end.herokuapp.com/';\r\n// let url = 'https://cosmic-envoy-301012.rj.r.appspot.com/';\r\nvar arregloImagenes = [];\r\nexport default {\r\n    name:'NuevoProducto',\r\n    components:{\r\n        InputFotos, Modal\r\n    },\r\n    data() {  \r\n      return {\r\n        form: {\r\n          nombre: '',\r\n          descripcion: '',\r\n          categoria: '',\r\n          precio: '',\r\n          cantidad: '',\r\n          nombreImags: [],\r\n          aplicaDescuento: false,\r\n          idProducto:'',\r\n          descuento:{\r\n            desde: '',\r\n            hasta:'',\r\n            tipoPorcentaje:true,\r\n            tipoMonto:false,\r\n            montoDescuento:'',\r\n            porcentajeDescuento:''\r\n          }\r\n        },\r\n        arrayImagenes:[],\r\n        arrayImagenes_:[],\r\n        enlacesUrl:[],\r\n        show: true,\r\n        activoVer:true,\r\n        activoBtnRegistrar: true,\r\n        descuentoHabilitado:true,\r\n        options: [],\r\n        RegistroEdicion:'',\r\n        oculto:true\r\n      }\r\n    },\r\n    computed:{\r\n        ...mapState(['productosTodos_', 'urlProductos'])\r\n    },\r\n    props:{\r\n        propsImg:{\r\n            id:Number,\r\n            src:String,\r\n            thumbnail:String\r\n        },\r\n        arregloFinal: Array,\r\n        producto: undefined,\r\n        // idProducto :'',\r\n        ElTituloModal: String\r\n    }, \r\n    methods: {\r\n      ...mapMutations(['updateProductosTodos']),\r\n      onSubmit(evt) {\r\n        if (this.form.idProducto === undefined) { this.form.idProducto = '' }\r\n        axios.post(`${url}NuevoProducto`, this.form, { headers: {'content-type':'application/json'} }).then(function (resp) {\r\n          this.guardarImagenes(this.arrayImagenes_, this.arrayImagenes, resp.data.id)\r\n          axios.post(`${url}traerTodos`,{ id:'' }).then(function(res){\r\n            this.updateProductosTodos(res.data)\r\n          }.bind(this));\r\n        }.bind(this));\r\n      },\r\n      onReset(evt) {\r\n        this.form.nombre = ''\r\n        this.form.descripcion = ''\r\n        this.form.categoria = null\r\n        this.form.precio = null\r\n        this.form.cantidad = null\r\n        this.form.nombreImags = null\r\n        this.activoBtnRegistrar = true\r\n        this.arrayImagenes = []\r\n        // this.enlacesUrl = []\r\n        this.show = false\r\n        this.form.descuento.desde = ''\r\n        this.form.descuento.hasta = ''\r\n        this.form.descuento.tipoPorcentaje = true\r\n        this.form.descuento.tipoMonto = false\r\n        this.form.descuento.montoDescuento = ''\r\n        this.form.descuento.porcentajeDescuento = ''\r\n        this.form.aplicaDescuento = false\r\n        this.descuentoHabilitado = true\r\n        this.$nextTick(() => {\r\n            this.show = true\r\n        })\r\n      },\r\n      cambiar(){\r\n        let that = this;\r\n        this.$watch(() => {\r\n          if(that.arrayImagenes != that.$refs.inputFoto.file){\r\n            // this.form.dataImags = this.$refs.inputFoto.file\r\n            that.arrayImagenes = that.$refs.inputFoto.file\r\n\r\n            that.form.dataImags = that.$refs.inputFoto.file;\r\n\r\n            // console.log(this.arrayImagenes);\r\n\r\n            const toBase64 = file => new Promise((resolve, reject) => {\r\n              const reader = new FileReader();\r\n              reader.readAsDataURL(file);\r\n              reader.onload = () => resolve(reader.result);\r\n              reader.onerror = error => reject(error);\r\n            });\r\n            // console.log(that.arrayImagenes.length);\r\n             let eso = this;\r\n            async function convert_Base64(){\r\n              for(var t = 0; t < that.arrayImagenes.length; t++){\r\n                that.form.dataImags[t] = (await toBase64(that.$refs.inputFoto.file[t]));\r\n                arregloImagenes.push({ id:that.form.nombreImags[t], src:that.form.dataImags[t], thumbnail:that.form.dataImags[t] })\r\n              }\r\n            }\r\n            convert_Base64();\r\n          }\r\n        });\r\n      },\r\n      vistaPreviaModal(){\r\n        console.log(this.arrayImagenes_)\r\n        this.$refs.elModal.arrayImagenes = this.arrayImagenes_\r\n        this.$bvModal.show(\"modal_1\");\r\n      },\r\n      formatNames(files) {\r\n          // console.log(files);\r\n        if (files.length === 1) {\r\n          return files[0].name\r\n        } else {\r\n          return `${files.length} Imágenes Seleccionadas`;\r\n          alert(`${files.length} Imágenes Seleccionadas`);\r\n        }\r\n      },\r\n      habilitarBoton(){\r\n        var archivos = document.querySelector(\"#Imagenes_Array\").files;\r\n        if(archivos.length > 0){\r\n          this.activoVer = false;\r\n        }\r\n        else{\r\n          this.activoVer = true;\r\n        }\r\n      },\r\n      cambioUnInput(){\r\n        if(this.form.nombre != '' && this.form.descripcion != '' && this.form.precio != '' && this.form.categoria != null && this.form.cantidad != '' ){\r\n            this.activoBtnRegistrar = false;\r\n\r\n\r\n          if(this.form.aplicaDescuento === true){\r\n            if(this.form.descuento.desde != '' && this.form.descuento.hasta != '' && this.form.descuento.montoDescuento != ''){\r\n              this.activoBtnRegistrar = false; //DISABLED=\"FALSE\" --> BTN HABILITADO\r\n            }\r\n            else{\r\n              this.activoBtnRegistrar = true; //DISABLED=\"TRUE\" --> BTN DESHABILITADO\r\n            }\r\n          }\r\n          else{\r\n            this.activoBtnRegistrar = false; //DISABLED=\"FALSE\" --> BTN HABILITADO\r\n          }\r\n\r\n\r\n        }\r\n        else{\r\n            this.activoBtnRegistrar = true;\r\n        }\r\n\r\n        //#region HABILITAR EL BOTON DE DESCUENTO EN CASO DE HABER INGRESADO UN PRECIO, SE NO HABERLO\r\n        if(this.form.precio != ''){\r\n          this.descuentoHabilitado = false; //DISABLED=\"FALSE\" --> BTN HABILITADO\r\n          // this.form.aplicaDescuento = false;\r\n        }\r\n        else{\r\n          this.descuentoHabilitado = true; //DISABLED=\"TRUE\" --> BTN DESHABILITADO\r\n          this.form.descuento.tipoPorcentaje = true;\r\n          this.form.descuento.tipoMonto = false;\r\n          this.form.descuento.desde = '';\r\n          this.form.descuento.hasta = '';\r\n          this.form.descuento.montoDescuento = '';\r\n          this.form.descuento.porcentajeDescuento = '';\r\n          this.form.aplicaDescuento = false;\r\n        }\r\n        //#endregion\r\n\r\n        //#region VER SI HAY DESCUENTO ACTIVADO, Y EN CASO DE ESTAR ACTIVADO VER SI TODOS SUS CAMPOS SE LLENARON\r\n\r\n\r\n        // if(this.form.precio != ''){\r\n        //   if(this.form.aplicaDescuento === true){\r\n        //     if(this.form.descuento.desde != '' && this.form.descuento.hasta != '' && this.form.descuento.montoDescuento != ''){\r\n        //       this.activoBtnRegistrar = false; //DISABLED=\"FALSE\" --> BTN HABILITADO\r\n        //     }\r\n        //     else{\r\n        //       this.activoBtnRegistrar = true; //DISABLED=\"TRUE\" --> BTN DESHABILITADO\r\n        //     }\r\n        //   }\r\n        //   else{\r\n        //     this.activoBtnRegistrar = false; //DISABLED=\"FALSE\" --> BTN HABILITADO\r\n        //   }          \r\n        // }\r\n        // else{\r\n        //   this.activoBtnRegistrar = true; //DISABLED=\"TRUE\" --> BTN DESHABILITADO\r\n        // }\r\n\r\n\r\n        //#endregion\r\n      },\r\n      cambioInputPrecio(){\r\n        if(this.form.nombre != '' && this.form.descripcion != '' && this.form.precio != '' && this.form.categoria != null && this.form.cantidad != '' ){\r\n            this.activoBtnRegistrar = false;\r\n\r\n\r\n          if(this.form.aplicaDescuento === true){\r\n            if(this.form.descuento.desde != '' && this.form.descuento.hasta != '' && this.form.descuento.montoDescuento != ''){\r\n              this.activoBtnRegistrar = false; //DISABLED=\"FALSE\" --> BTN HABILITADO\r\n            }\r\n            else{\r\n              this.activoBtnRegistrar = true; //DISABLED=\"TRUE\" --> BTN DESHABILITADO\r\n            }\r\n          }\r\n          else{\r\n            this.activoBtnRegistrar = false; //DISABLED=\"FALSE\" --> BTN HABILITADO\r\n          }\r\n\r\n\r\n\r\n        }\r\n        else{\r\n            this.activoBtnRegistrar = true;\r\n        }\r\n\r\n        //#region HABILITAR EL BOTON DE DESCUENTO EN CASO DE HABER INGRESADO UN PRECIO, SE NO HABERLO\r\n        if(this.form.precio != ''){\r\n          this.descuentoHabilitado = false; //DISABLED=\"FALSE\" --> BTN HABILITADO\r\n          // this.form.aplicaDescuento = false;\r\n        }\r\n        else{\r\n          this.descuentoHabilitado = true; //DISABLED=\"TRUE\" --> BTN DESHABILITADO\r\n          this.form.descuento.tipoPorcentaje = true;\r\n          this.form.descuento.tipoMonto = false;\r\n          this.form.descuento.desde = '';\r\n          this.form.descuento.hasta = '';\r\n          this.form.descuento.montoDescuento = '';\r\n          this.form.descuento.porcentajeDescuento = '';\r\n          this.form.aplicaDescuento = false;\r\n        }\r\n        //#endregion\r\n\r\n        //#region VER SI HAY DESCUENTO ACTIVADO, Y EN CASO DE ESTAR ACTIVADO VER SI TODOS SUS CAMPOS SE LLENARON\r\n\r\n\r\n        // if(this.form.precio != ''){\r\n        //   if(this.form.aplicaDescuento === true){\r\n        //     if(this.form.descuento.desde != '' && this.form.descuento.hasta != '' && this.form.descuento.montoDescuento != ''){\r\n        //       this.activoBtnRegistrar = false; //DISABLED=\"FALSE\" --> BTN HABILITADO\r\n        //     }\r\n        //     else{\r\n        //       this.activoBtnRegistrar = true; //DISABLED=\"TRUE\" --> BTN DESHABILITADO\r\n        //     }\r\n        //   }\r\n        //   else{\r\n        //     this.activoBtnRegistrar = false; //DISABLED=\"FALSE\" --> BTN HABILITADO\r\n        //   }          \r\n        // }\r\n        // else{\r\n        //   this.activoBtnRegistrar = true; //DISABLED=\"TRUE\" --> BTN DESHABILITADO\r\n        // }\r\n\r\n\r\n        //#endregion\r\n      },\r\n      cambioTipoDescuento(){\r\n        this.form.descuento.tipoPorcentaje = !this.form.descuento.tipoPorcentaje;\r\n        this.form.descuento.tipoMonto = !this.form.descuento.tipoMonto;\r\n        this.form.descuento.montoDescuento = '';\r\n        this.form.descuento.porcentajeDescuento = '';\r\n        this.activoBtnRegistrar = true; //DISABLED=\"FALSE\" --> BTN DESHABILITADO\r\n      },\r\n      cambioDescuentoPorc(e){\r\n        if(parseFloat(this.form.descuento.porcentajeDescuento) > parseFloat(e.target.max)){\r\n          alert(`El porcentaje de descuento no puede exceder el ${e.target.max}%`);\r\n          this.form.descuento.porcentajeDescuento = '';\r\n        }\r\n        else{\r\n          this.form.descuento.montoDescuento = (this.form.precio * (this.form.descuento.porcentajeDescuento / 100)).toFixed(1)\r\n          // console.log(this.form)\r\n        }\r\n\r\n        \r\n        // console.log('desde:  ' + this.form.descuento.desde)\r\n        // console.log('hasta:  ' + this.form.descuento.hasta)\r\n        // console.log('monto:  ' + this.form.descuento.montoDescuento)\r\n        // console.log('porce:  ' + this.form.descuento.porcentajeDescuento)\r\n\r\n\r\n        if(this.form.nombre != '' && this.form.descripcion != '' && this.form.precio != '' && this.form.categoria != null && this.form.cantidad != '' && this.form.descuento.porcentajeDescuento != '' ){\r\n          if(this.form.descuento.desde === \"\" || this.form.descuento.hasta === \"\"){\r\n            this.activoBtnRegistrar = true; //DISABLED=\"TRUE\" --> BTN DESHABILITADO\r\n          }\r\n          else{\r\n            this.activoBtnRegistrar = false; //DISABLED=\"TRUE\" --> BTN HABILITADO\r\n          }  \r\n        }\r\n        else{\r\n            this.activoBtnRegistrar = true;\r\n        }\r\n      },\r\n      cambioDescuentoMonto(e){\r\n        if(parseFloat(this.form.descuento.montoDescuento) > parseFloat(e.target.max)){\r\n          alert(`El monto de descuento no puede exceder los ${e.target.max} CLP`);\r\n          this.form.descuento.montoDescuento = '';\r\n        }\r\n        else{\r\n          this.form.descuento.porcentajeDescuento = ((this.form.precio - (this.form.precio - this.form.descuento.montoDescuento)) / this.form.precio) * 100\r\n          console.log(this.form)\r\n        }\r\n        // console.log('desde:  ' + this.form.descuento.desde)\r\n        // console.log('hasta:  ' + this.form.descuento.hasta)\r\n        // console.log('monto:  ' + this.form.descuento.montoDescuento)\r\n        // console.log('porce:  ' + this.form.descuento.porcentajeDescuento)\r\n\r\n\r\n        if(this.form.nombre != '' && this.form.descripcion != '' && this.form.precio != '' && this.form.categoria != null && this.form.cantidad != '' && this.form.descuento.montoDescuento != ''){\r\n          if(this.form.descuento.desde === \"\" || this.form.descuento.hasta === \"\"){\r\n            this.activoBtnRegistrar = true; //DISABLED=\"TRUE\" --> BTN DESHABILITADO\r\n          }\r\n          else{\r\n            this.activoBtnRegistrar = false; //DISABLED=\"TRUE\" --> BTN HABILITADO\r\n          }  \r\n        }\r\n        else{\r\n            this.activoBtnRegistrar = true;\r\n        }\r\n      },\r\n      cambioAplicaDescuento(){\r\n        this.form.aplicaDescuento = !this.form.aplicaDescuento;\r\n        if(this.form.aplicaDescuento === false){\r\n          this.form.descuento.desde = ''\r\n          this.form.descuento.hasta = ''\r\n          this.form.descuento.tipoPorcentaje = true\r\n          this.form.descuento.tipoMonto = false\r\n          this.form.descuento.montoDescuento = ''\r\n          this.form.descuento.porcentajeDescuento = ''\r\n          this.cambioInputPrecio()\r\n        }\r\n        else{\r\n          this.activoBtnRegistrar = true; //DISABLED=\"FALSE\" --> BTN DESHABILITADO\r\n        }\r\n      },\r\n      guardarImagenes(imagenes, archivos, nombreArchivo){\r\n        var mountainsRef = firebase.storage().ref().child(`/productos/${nombreArchivo}`)\r\n        // this.idProducto = nombreArchivo\r\n        var that = this\r\n        mountainsRef.listAll()\r\n        .then(function (result) {\r\n          if(result.items.length > 0){\r\n            result.items.forEach(function (file) {\r\n              file.delete()\r\n            })\r\n          } \r\n        })\r\n        .then(async function guardado() {\r\n          var arregloUrls = []\r\n          for (let index = 0; index < imagenes.length; index++) {\r\n            const dato = await firebase.storage().ref(`/productos/${nombreArchivo.replace(/ /g,'_')}/${imagenes[index].id}`).put(archivos[index])\r\n            var getToken = await axios.get(`https://firebasestorage.googleapis.com/v0/b/storeappfront-465d5.appspot.com/o/${dato.metadata.fullPath.replace(/\\//g,'%2F')}`)\r\n            arregloUrls.push(`${nombreArchivo}%2F${dato.ref.name}?alt=media&token=${getToken.data.downloadTokens}`)\r\n          }\r\n\r\n          var data =  { idProducto: nombreArchivo, imagenes:arregloUrls }\r\n\r\n          axios.post(`${url}guardarImagenes`, data, { headers: {'content-type':'application/json'} }).then(function(resp, err){\r\n            that.$bvModal.hide('modalProducto')\r\n            if(!err){\r\n              that.enlacesUrl = []\r\n            }\r\n            else{\r\n              console.log(err)\r\n            }\r\n          })\r\n        })\r\n      }\r\n    }, \r\n    watch:{\r\n      arrayImagenes: function (nv, ov) {\r\n        if(nv.length > 0){\r\n          var arregloImagenes = []\r\n          var convertido;\r\n          const toBase64 = file => new Promise((resolve, reject) => {\r\n            const reader = new FileReader();\r\n            reader.readAsDataURL(file);\r\n            reader.onload = () => resolve(reader.result);\r\n            reader.onerror = error => reject(error);\r\n          });\r\n          async function convert_Base64(){\r\n            for(var t = 0; t < nv.length; t++){\r\n              convertido = (await toBase64(nv[t]));\r\n              arregloImagenes.push({ id:nv[t].name, src:convertido, thumbnail:convertido })\r\n            }\r\n          }\r\n          convert_Base64()\r\n          this.arrayImagenes_ = arregloImagenes  \r\n        }\r\n      },\r\n      producto(nuevo){\r\n          this.descuentoHabilitado = false;\r\n          this.form.nombre = nuevo.nombre;\r\n          this.form.descripcion = nuevo.descripcion;\r\n          this.form.categoria = nuevo.categoria;\r\n          this.form.precio = nuevo.precio;\r\n          this.form.cantidad = nuevo.cantidad;\r\n          this.form.nombreImags = nuevo.nombreImagenes;\r\n          this.form.idProducto = nuevo._id;\r\n          if(nuevo.aplicaDescuento){\r\n            this.form.aplicaDescuento = nuevo.aplicaDescuento;\r\n            this.form.descuento.desde = nuevo.descuento.desde;\r\n            this.form.descuento.hasta = nuevo.descuento.hasta;\r\n            this.form.descuento.tipoPorcentaje = nuevo.descuento.tipoPorcentaje;\r\n            this.form.descuento.tipoMonto = nuevo.descuento.tipoMonto;\r\n            this.form.descuento.montoDescuento = nuevo.descuento.montoDescuento;\r\n            this.form.descuento.porcentajeDescuento = nuevo.descuento.porcentajeDescuento;\r\n          }\r\n          else{\r\n            this.form.aplicaDescuento = false;\r\n            this.form.descuento.desde = ''\r\n            this.form.descuento.hasta = ''\r\n            this.form.descuento.tipoPorcentaje = true\r\n            this.form.descuento.tipoMonto = false\r\n            this.form.descuento.montoDescuento = ''\r\n            this.form.descuento.porcentajeDescuento = ''\r\n          }\r\n          ////////////////////////////////////////////////////////////////////////////////\r\n          ////////////////////////////////////////////////////////////////////////////////\r\n          this.arrayImagenes_ = []\r\n          this.form.nombreImags.map(function(e){\r\n            this.arrayImagenes_.push({ id:e, src:`${urlImagen}/${this.form.idProducto}/${e}`, thumbnail:`${urlImagen}/${this.form.idProducto}/${e}` })\r\n          }.bind(this))\r\n          // this.arrayImagenes_ = nuevo.dataImagenes;\r\n          ////////////////////////////////////////////////////////////////////////////////\r\n          ////////////////////////////////////////////////////////////////////////////////\r\n          if(this.form.nombre != ''){\r\n            this.activoBtnRegistrar = false;\r\n          }\r\n      }\r\n    },\r\n    mounted(){\r\n      this.options.push({ 'value':null, 'text':'Categoría'})\r\n      axios.get(`${url}traerCategorias`).then(function(resp){\r\n        resp.data.map(function(obj){\r\n          this.options.push({ 'value':obj._id, 'text':obj.nombre })\r\n        }.bind(this))\r\n      }.bind(this))\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n    .preloader {\r\n      position: relative!important;\r\n      width: 46px;\r\n      height: 46px;\r\n      border: 8px solid #eee;\r\n      border-top: 8px solid #047857;\r\n      border-radius: 50%;\r\n      left: 340px!important;\r\n      animation-name: girar;\r\n      animation-duration: 1.5s;\r\n      animation-iteration-count: infinite;\r\n      animation-timing-function: linear;\r\n  }\r\n  @keyframes girar {\r\n    from {\r\n      transform: rotate(0deg);\r\n    }\r\n    to {\r\n      transform: rotate(360deg);\r\n    }\r\n  }\r\n  .container{\r\n    margin-top: 0px!important;\r\n  }\r\n  .custom-control-label, .lbl{\r\n    font-size: 14px!important;\r\n  }\r\n  .input-group-prepend,.input-group-text{\r\n    width: 41px!important;\r\n  }\r\n  .input-group-prepend{\r\n    text-align: center;\r\n  }\r\n  .b-custom-control-lg > label.custom-control-label{\r\n    padding-top: 4px!important;\r\n  }\r\n  #modalProducto___BV_modal_content_{\r\n    border-width: 0px!important;\r\n  }\r\n  #modalProducto___BV_modal_title_{\r\n    padding-top: 5px!important;\r\n  }\r\n</style>"]}]}